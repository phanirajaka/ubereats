(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[67348,14263,30701,70535,51099,55350],{61580:(e,t,n)=>{var r="__lodash_hash_undefined__",i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,s=/^\./,a=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,l=/^\[object .+?Constructor\]$/,u="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),p=Array.prototype,g=Function.prototype,f=Object.prototype,m=h["__core-js_shared__"],v=function(){var e=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),b=g.toString,y=f.hasOwnProperty,_=f.toString,x=RegExp("^"+b.call(y).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=h.Symbol,k=p.splice,Z=P(h,"Map"),C=P(Object,"create"),w=S?S.prototype:void 0,O=w?w.toString:void 0;function H(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function $(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function E(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function T(e,t){for(var n=e.length;n--;)if(B(e[n][0],t))return n;return-1}function M(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function P(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!A(e)||function(e){return!!v&&v in e}(e))&&(function(e){var t=A(e)?_.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?x:l).test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}H.prototype.clear=function(){this.__data__=C?C(null):{}},H.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},H.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return n===r?void 0:n}return y.call(t,e)?t[e]:void 0},H.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:y.call(t,e)},H.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?r:t,this},$.prototype.clear=function(){this.__data__=[]},$.prototype.delete=function(e){var t=this.__data__,n=T(t,e);return!(n<0||(n==t.length-1?t.pop():k.call(t,n,1),0))},$.prototype.get=function(e){var t=this.__data__,n=T(t,e);return n<0?void 0:t[n][1]},$.prototype.has=function(e){return T(this.__data__,e)>-1},$.prototype.set=function(e,t){var n=this.__data__,r=T(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},E.prototype.clear=function(){this.__data__={hash:new H,map:new(Z||$),string:new H}},E.prototype.delete=function(e){return M(this,e).delete(e)},E.prototype.get=function(e){return M(this,e).get(e)},E.prototype.has=function(e){return M(this,e).has(e)},E.prototype.set=function(e,t){return M(this,e).set(e,t),this};var z=R((function(e){e=function(e){return null==e?"":function(e){if("string"==typeof e)return e;if(L(e))return O?O.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}(e);var t=[];return s.test(e)&&t.push(""),e.replace(a,(function(e,n,r,i){t.push(r?i.replace(c,"$1"):n||e)})),t}));function I(e){if("string"==typeof e||L(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function R(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s),s};return n.cache=new(R.Cache||E),n}function B(e,t){return e===t||e!=e&&t!=t}R.Cache=E;var D=Array.isArray;function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==_.call(e)}e.exports=function(e,t,n){var r=null==e?void 0:function(e,t){for(var n=0,r=(t=function(e,t){if(D(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!L(e))||o.test(e)||!i.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return D(e)?e:z(e)}(t)).length;null!=e&&n<r;)e=e[I(t[n++])];return n&&n==r?e:void 0}(e,t);return void 0===r?n:r}},34197:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(25301),i=n(58252),o=n(30330);const s=e=>{const t=(0,r.T)(),{iconColor:n,iconSize:s,ariaLabel:a=t("shared.close"),...c}=e;return(0,o.tZ)("button",{"aria-label":a,...c,children:(0,o.tZ)(i.Z,{type:"Close",width:s,height:s,color:n})})}},85986:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(64248),i=n(66814);const o=(0,r.zo)("button",(e=>{let{$theme:t,radius:n}=e;return{...(0,i.Z)({$theme:t,radius:n}),textDecoration:"none",":active":{background:t.colors.backgroundSecondary}}}))},4933:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(92346),i=n(76307),o=n(26602),s=n(82395),a=n(30330);const c=()=>{const e=(0,r.TH)();return(0,a.tZ)(i.ZP,{backLocation:(0,o.N0q)(e),children:(0,a.tZ)(s.Z,{})})}},18143:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(25301),i=n(64248),o=n(58252),s=n(35096),a=n(30330);const c=(0,i.zo)("button",(e=>{let{$theme:t}=e;return(0,s.Z)(t)})),l=e=>{const t=(0,r.T)();return(0,a.tZ)(c,{onClick:e.onClick,"aria-label":t("shared.goBack"),"data-testid":"dialog-back",children:(0,a.tZ)(o.Z,{type:"ArrowLeft"})})}},35096:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o,i:()=>i});var r=n(44335);const i="48px",o=e=>({display:"flex",position:"absolute",top:"8px",left:"8px",height:i,width:i,alignItems:"center",justifyContent:"center",cursor:"pointer",borderRadius:e.borders.radiusFull,boxSizing:"border-box",background:e.colors.backgroundPrimary,zIndex:r.I_.surface,":active":{boxShadow:"inset 0 0 0 100px rgba(0, 0, 0, 0.08)"}})},95134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(64248),i=n(35096),o=n(34197);const s=(0,r.zo)(o.Z,(e=>{let{$theme:t}=e;return(0,i.Z)(t)}))},76307:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>S,a7:()=>_,cN:()=>x});var r=n(77808),i=n(64248),o=n(81405),s=n(76005),a=n(44335),c=n(92346),l=n(71221),u=n(26602),d=n(9842),h=n(81922),p=n(81830),g=n(62040),f=n(4865),m=n(30330);const v=(0,i.zo)("div",(e=>{let{$theme:t,$overlay:n,$takeOverModal:r}=e;return{display:"flex",flexDirection:"column",flex:1,background:t.colors.backgroundPrimary,maxWidth:"100%",height:"100%",position:"relative",zIndex:r?a.I_.base:a.I_.modal,...n?{position:"absolute",top:0,width:"100%"}:{}}})),b=(0,i.zo)("div",(e=>({position:e.$isStuck?"sticky":"relative",zIndex:a.I_.modal,top:0}))),y=(0,i.zo)("div",(e=>({padding:e.$removeTopPadding?"12px 16px 0 16px":"64px 16px 0 16px",height:"100%",boxSizing:"border-box"}))),_=(0,i.Le)(y,(e=>function(t){const{embeddedFeatures:n}=(0,h.v)((e=>{let{embeddedFeatures:t}=e;return{embeddedFeatures:t}})),r=n.xlbHeaderBridge,{children:i,...o}=t;return(0,m.tZ)(e,{$removeTopPadding:r,...o,children:i})})),x=o.Z,S=e=>{var t;const n=(0,c.TH)(),i=(0,l.Z)(),o=r.useContext(f.w),{backLocation:a=(0,u.W57)(n),hasBackButton:y,hasCloseButton:_=!0,inverseColor:x=!1,isHeaderStatic:S,stickyBanner:k,onClose:Z=(()=>i(a)),isTakeOverModal:C,isSecondaryCloseButton:w=!1}=e,{elementRef:O,isStuck:H}=(0,d.Z)(),{embeddedFeatures:$}=(0,h.v)((e=>{let{embeddedFeatures:t}=e;return{embeddedFeatures:t}})),E=$.xlbHeaderBridge;return(0,m.BX)(v,{$overlay:e.overlay,$takeOverModal:null!==(t=null==o?void 0:o.isTakeOverModal)&&void 0!==t?t:C,"data-test":"mobile-dialog",children:[k?(0,m.tZ)(b,{$isStuck:H,children:(0,m.tZ)(k,{})}):null,(0,m.tZ)(g.Z,{children:(0,m.tZ)(p.Z,{})}),(0,m.tZ)(s.Z,{headerRef:O,hasBackButton:y,hasCloseButton:_,onClose:Z,isSecondaryCloseButton:w,hideHeader:!0,inverseColor:x,isStuck:!E&&H,title:e.title,topRightIconButton:e.topRightIconButton,isHeaderStatic:S}),e.children]})}},76005:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var r=n(64248),i=n(18143),o=n(95134),s=n(35096),a=n(34197);const c=(0,r.zo)(a.Z,(e=>{let{$theme:t}=e;return{...(0,s.Z)(t),background:t.colors.backgroundInverseSecondary}}));var l=n(44335),u=n(31434);const d=(0,r.zo)(a.Z,(e=>{let{$theme:t}=e;return{...(0,s.Z)(t),background:t.colors.primary100,color:t.colors.mono1000}}));var h=n(30330);const p=(0,r.zo)("div",(e=>({position:"sticky",top:0,zIndex:l.I_.cover,width:"100%",height:e.$hideHeader?"0px":"48px"}))),g=(0,r.zo)("div",(e=>({height:e.$isStuck||e.$isHeaderStatic?"64px":"0px",backgroundColor:e.$theme.colors.backgroundPrimary,boxShadow:e.$isStuck&&!e.$isHeaderStatic?e.$theme.shadows.divider:"",display:"flex",alignItems:"center",opacity:e.$isStuck||e.$isHeaderStatic?1:0,transition:"height 300ms ease, opacity 300ms ease",position:"absolute",width:"100%",...e.$hasButton||e.$hasTopRightIconButton?{"::before":{content:'""',flex:"1 0 ".concat(s.i)},"::after":{content:'""',flex:"1 0 ".concat(s.i)}}:{}}))),f=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelLarge,color:t.colors.contentPrimary,padding:"12px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",flex:"1 1 auto",textAlign:"center"}})),m=(0,r.zo)("button",(e=>{let{$theme:t,$style:n}=e;return{...(0,s.Z)(t),right:"8px",left:null,...n}})),v=e=>{const[,t]=(0,r.hQ)();let n=null;return e.hasBackButton?n=(0,h.tZ)(i.Z,{onClick:e.onClose}):e.hasCloseButton&&(n=e.isSecondaryCloseButton?(0,h.tZ)(d,{"data-testid":"close-button",onClick:e.onClose}):e.inverseColor?(0,h.tZ)(c,{"data-testid":"close-button",onClick:e.onClose,iconColor:"contentInversePrimary"}):(0,h.tZ)(o.Z,{"data-testid":"close-button",onClick:e.onClose,iconColor:"contentPrimary"})),n||e.title?(0,h.BX)(h.HY,{children:[(0,h.tZ)("div",{ref:e.headerRef}),(0,h.BX)(p,{$hideHeader:e.hideHeader&&!e.isHeaderStatic,children:[(0,h.tZ)(g,{$isStuck:e.isStuck,$isHeaderStatic:e.isHeaderStatic,$hasButton:null!==n,$hasTopRightIconButton:Boolean(e.topRightIconButton),children:e.title?"string"==typeof e.title?(0,h.tZ)(f,{children:e.title}):e.title:null}),(0,h.tZ)(u.Z,{children:n}),e.topRightIconButton?(0,h.tZ)(m,{$style:{..."SECONDARY"===e.topRightIconButton.type?{background:t.colors.primary100}:{}},onClick:e.topRightIconButton.onClick,children:e.topRightIconButton.icon}):null]})]}):null}},65690:(e,t,n)=>{"use strict";n.d(t,{Z:()=>b});var r=n(85865),i=n(77808),o=n(20341),s=n(37725),a=n(48281);const c=e=>{const t=(0,a.Z)(),n=(0,i.useCallback)((t=>{const n=function(e){if(e&&"object"==typeof e&&"string"==typeof e.type){const t=e.payload;return{type:e.type,payload:t&&"object"==typeof t?Object.keys(t).reduce(((e,n)=>(e[n]=t[n],e)),{}):null}}return null}(null==t?void 0:t.data);return!!n&&e(n)}),[e]);(0,i.useEffect)((()=>{if(t&&r.Z)return r.Z.addEventListener("message",n),()=>{r.Z&&r.Z.removeEventListener("message",n)}}),[t,n])};var l=n(90120),u=n(14384),d=n(49822),h=n(84077),p=n(26602),g=n(69262),f=n(86078),m=n(92346),v=n(24070);const b=()=>{const e=(0,s.k6)(),t=(0,l.Z)(),n=(0,m.TH)(),a=(0,u.Z)(),{totalOrders:b}=(0,g.Z)(),{hydrateDelegatedBooking:y}=(0,v.W)(),_=(0,o.Z)({page:"order"}),x=(0,p.vN_)(n,"storeOverflowActions"),{toggleIsOpen:S}=(0,h.qi)();return c((0,i.useCallback)((n=>{if("CUSTOM_HEADER_ACTION"===n.type){const i=n.payload;if("BACK_TO_FEED"===(null==i?void 0:i.action))e.push(t);else if("HELP"===(null==i?void 0:i.action))(0,f.Z)(_);else if("ACCOUNT"===(null==i?void 0:i.action))S();else if("SHOPPING_CART"===(null==i?void 0:i.action)){if(!r.Z)return;b<=1?e.push((0,p.nQQ)(r.Z.location)):(0,p.zrB)(r.Z.location,"multicartMobileSwitcher")?e.replace((0,p.C45)(r.Z.location)):e.push((0,p.vN_)(r.Z.location,"multicartMobileSwitcher"))}else"STORE_OVERFLOW"===(null==i?void 0:i.action)&&e.push(x)}else"HYDRATE_DELEGATED_BOOKING"===n.type&&y(n.payload);"USER_TRIGGERED_IMPRESSION"===n.type&&((0,d.be)(),a({source:"user_triggered"}))}),[e,t,_,S,b,x,a,y])),null}},81405:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(64248),i=n(44335),o=n(30330);const s=(0,r.zo)("div",{height:"112px"}),a=(0,r.zo)("div",(e=>{let{$theme:t}=e;return{padding:i.a9,position:"fixed",bottom:0,left:0,right:0,zIndex:i.I_.cover,...t.overlays.floatingButtonGradient}}));function c(e){return(0,o.BX)("div",{children:[(0,o.tZ)(s,{}),(0,o.tZ)(a,{children:e.children})]})}},280:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(64248),i=n(41494),o=n(44335),s=n(30330);const a=(0,r.zo)("div",(e=>{let{$reverse:t}=e;return{display:"flex",position:"relative",flexDirection:t?"row-reverse":"row"}})),c=(0,r.zo)("input",(e=>{let{$theme:t,checked:n}=e;return{position:"absolute",opacity:0,pointerEvents:"none",outline:"none",":focus[data-focus-visible-added]+label:before":{...n?{boxShadow:"0 0 0 2px ".concat(t.colors.focus)}:{border:"solid 3px ".concat(t.colors.borderSelected)}}}})),l=e=>encodeURIComponent('\n  <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0V20H20V0H0ZM8.5 15.1L2.90002 9.5L5 7.39999L8.40002 10.8L14.8 4.39999L16.9 6.5L8.5 15.1Z" fill="'.concat(e,'" />\n  </svg>\n  ')),u=(0,r.zo)("label",(e=>{let{$checked:t,$disabled:n,$reverse:r,$theme:i}=e;return{...i.typography.LabelMedium,width:"100%",display:"flex",boxSizing:"border-box",alignItems:"center",flexDirection:r?"row-reverse":"row",justifyContent:"space-between",cursor:"pointer",fontSize:"16px",lineHeight:"20px",transition:"background-color 100ms ease 0s",":before":{flex:"none",display:"flex",boxSizing:"border-box",border:"solid 3px ".concat(n?i.colors.disabled:i.colors.tickBorder),...t?{border:"0",backgroundColor:i.colors.tickMarkFill,backgroundImage:"url('data:image/svg+xml,".concat(l(i.colors.tickFillSelected),"');"),backgroundPosition:"center center",backgroundSize:"cover"}:{},content:"''",cursor:"pointer",height:o.sh,width:o.sh,verticalAlign:"middle"}}})),d=e=>(0,s.BX)(a,{$reverse:Boolean(e.reverse),children:[e.startElement,(0,s.tZ)(c,{type:"checkbox",id:e.id,name:e.name,value:e.value,checked:e.isChecked,disabled:Boolean(e.isDisabled),onChange:e.onChange}),(0,s.BX)(u,{htmlFor:e.id,$disabled:Boolean(e.isDisabled),$reverse:e.reverse,$checked:e.isChecked,children:[(0,s.tZ)(i.ZP,{$width:"16px"}),e.children]})]})},64240:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(77808),i=n(92346),o=n(79510),s=n(26602),a=n(30330);const c=e=>{var t;const n=(0,i.TH)(),c=o.parse(n.search),l=null!==(t=c[s.FSm.modalContext])&&void 0!==t?t:"";if(c[s.FSm.modalName]===e.modalName||c[s.FSm.popoverName]===e.modalName){if(e.children)return r.Children.map(e.children,(e=>r.cloneElement(e,{modalContext:l})));const t=e.component;if(t)return(0,a.tZ)(t,{modalContext:l})}return null}},89336:(e,t,n)=>{"use strict";n.d(t,{Z:()=>ne});var r=n(77808);const i=()=>{},o=e=>!(!e||"object"!=typeof e)&&"function"==typeof e.timing&&"function"==typeof e.increment,s=()=>({increment:i,timing:i}),a=e=>{try{const t=JSON.parse(e);return"object"==typeof t?t:{}}catch(e){return{}}},c=e=>{let t=!1;return(n,r)=>{t||(t=!0,e(n,r))}},l=(e,t)=>{e.xhr.readyState!==e.xhr.UNSENT&&e.xhr.readyState!==e.xhr.DONE&&(Date.now()-e.lastResponse>t&&e.xhr.abort(),setTimeout(l,t,e,t))};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce(((e,t)=>function(){return e(t(...arguments))}))}const d={ACK:"/events/ack",RECV:"/events/recv"},h={dca1:"dca",phx2:"phx"},p=(e,t,n)=>{switch(n){case"sameorigin":return"/ramen".concat(h[t]).concat(d[e]||"");case"breeze":return"https://ramen".concat(h[t],".uber.com").concat(d[e]||"");case"openid":return"https://ramen".concat(h[t],".uberinternal.com").concat(d[e]||"");default:return"https://cn-".concat(t,".uber.com/ramen").concat(d[e]||"")}},g={altitude:"x-uber-device-location-altitude",app:"x-uber-client-name",authorization:"Authorization",device:"x-uber-device",deviceId:"x-uber-device-id",deviceIds:"x-uber-device-ids",deviceModel:"x-uber-device-model",deviceOS:"x-uber-device-os",epoch:"x-uber-device-epoch",language:"x-uber-device-language",latitude:"latitude",longitude:"longitude",origin:"x-uber-origin",regionId:"x-uber-region-id",service:"x-uber-push-service",source:"x-uber-source",token:"x-uber-token",uuid:"x-uber-uuid",version:"x-uber-client-version",screenflowVersion:"x-uber-screenflow-client-version",appVariant:"x-uber-app-variant"},f=e=>(e.hasOwnProperty("device")||(e.device="web"),Object.keys(e).map((t=>{const n=g[t],r=e[t];if(n&&r)return[n,e[t]]})).filter(Boolean)),m=(e,t)=>e.slice(-1)===t?e.slice(0,-1):e,v=new RegExp(/\n\n$/),b=new RegExp(/^(close|data|event|id|):\s?(.*)/),y=e=>{let[t,n]=["",""];const r=b.exec(e);return r&&3===r.length&&([,t,n]=r),e.length>0&&!e.includes(":")&&(t=e),[t,n]},_=(e,t,n)=>{switch(t){case"event":e.name=n;break;case"data":e.data="".concat(e.data||"").concat(n,"\n");break;case"id":e.id=n}return e},x=e=>{let t={data:"",name:""},n="";return r=>{if(n+=r,v.test(n)){n=m(n,"\n");for(const r of n.split("\n")){if(""===r){t.data=m(t.data||"","\n"),e(t),t={data:"",name:""},n="";continue}if(":"===r[0])continue;const[i,o]=y(r);t=_(t,i,o)}}}};var S=n(50193);function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z="undefined"!=typeof process&&process.release&&"node"===process.release.name,C=e=>"function"==typeof e?e():null,w=(e,t,n)=>({code:t,error:n,stopped:e});class O{constructor(e){k(this,"authenticateUser",(e=>{if(!this.authenticationMethod||"sameorigin"===this.authenticationMethod)return void e();if("undefined"==typeof fetch||fetch.polyfill||Z)return void e(w(!0,"unsupported_browser"));const t=p("ACK",this.session.datacenter,this.authenticationMethod);fetch("".concat(t,"?seq=-1"),{credentials:"include",mode:"no-cors"}).then((e=>e.ok?e:fetch("".concat(t,"?seq=-1"),{credentials:"include"}))).then((t=>{const n=200===t.status?void 0:w(!0,"authentication_failed");e(n)})).catch((t=>e(w(!0,"authentication_failed",t))))})),k(this,"startPolling",(e=>{const t=p("RECV",this.session.datacenter,this.authenticationMethod),n="".concat(t,"?seq=").concat(this.session.seq),r=[...f(this.user),["cache-control","no-cache"],["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean);this.session.stopPolling=((e,t)=>{const n=new XMLHttpRequest,r=c(t.onDisconnect),i=c(t.onConnect),o={lastResponse:Date.now(),xhr:n};let s=0,a=0;return n.onreadystatechange=()=>{if(n.readyState===n.LOADING||n.readyState===n.DONE){n.status<400&&i(null),o.lastResponse=Date.now();const e=n.responseText.substring(a);a=n.responseText.length,t.callback(e)}const e=n.readyState<s;if(s=Math.max(n.readyState,s),n.readyState===n.DONE||e){let i={connectionClosed:n.readyState===n.DONE,responseText:n.responseText,statusCode:n.status,timestamp:(new Date).toISOString(),userAborted:e};t.returnHeaders&&(i={...i,requestHeaders:n._headers,responseHeaders:n.responseHeaders}),r(null,i)}},n.onerror=e=>{n.abort(),r(new Error(e))},n.open("GET",e),n.withCredentials=!0,t.headers.map((e=>{let[t,r]=e;return n.setRequestHeader(t,r)})),n.send(),o.lastResponse=Date.now(),l(o,t.disconnectInterval),()=>n.abort()})(n,{callback:u(x(this.handleEvent),this.maybeSendAck),disconnectInterval:2e4,headers:r,onDisconnect:e,returnHeaders:this.returnHeaders,onConnect:()=>{this.manager&&this.manager.notifyConnection(this)}})})),k(this,"retryPolling",(()=>{const e=Date.now();this.m3Client.increment("request",{method:"recv"}),this.didFirstPoll||(this.m3Client.timing("client-ready",Date.now()-this.initTimestamp),this.didFirstPoll=!0),this.startPolling(((t,n)=>{this.session.active?(t?this.callback(w(!1,"client_error",t),null,this):this.callback(w(!1,"client_disconnected",n),null,this),this.m3Client.timing("latency",Date.now()-e,{method:"recv"}),setTimeout(this.retryPolling,5e3)):this.callback(w(!0,"session_inactive",t),null,this)}))})),k(this,"sendAck",(()=>{const e=p("ACK",this.session.datacenter,this.authenticationMethod),t=Date.now();this.m3Client.increment("request",{method:"ack"}),((e,t,n)=>{const r=new XMLHttpRequest;r.onreadystatechange=()=>{if(r.readyState===r.DONE){if(r.status<200||r.status>=300){let e={message:r.responseText,status:r.status};return t.returnHeaders&&(e={...e,requestHeaders:r._headers,responseHeaders:r.responseHeaders}),void n(e)}n(null,a(r.responseText))}},r.open(t.method,e),r.timeout=t.timeout||3e4,r.withCredentials=!0,t.headers.map((e=>{let[t,n]=e;return r.setRequestHeader(t,n)})),r.send(t.body||null)})("".concat(e,"?seq=").concat(this.session.seq),{headers:[...f(this.user),["x-uber-client-session",this.session.uuid],this.user.uuid?["x-auth-params-user-uuid",this.user.uuid]:null].filter(Boolean),method:"GET",returnHeaders:this.returnHeaders},(e=>{e&&this.callback(w(!1,"ack_failed",e),null,this),this.m3Client.timing("latency",Date.now()-t,{method:"ack"})}))})),k(this,"handleEvent",(e=>{if((e=>!(e.name||e.data||e.seq))(e))return;if("close"===e.name)return void C(this.session.stopPolling);const{msg:t}=a(e.data);"rmn-msg-v1"===e.name&&Array.isArray(t)?t.map(this.handleMessage):this.callback(w(!1,"unrecognised_message",e),null,this)})),k(this,"handleMessage",(e=>{Number.isFinite(e.seq)&&e.seq>this.session.seq&&(this.session.seq=e.seq),this.callback(null,e,this)})),k(this,"stop",(()=>{this.session.active=!1,C(this.session.stopPolling)})),this.callback=e.callback,this.user=e.user,this.manager=e.manager,this.authenticationMethod=e.authenticationMethod,this.session={active:!0,datacenter:e.datacenter,seq:0,uuid:(0,S.Z)()},this.m3Client=o(e.m3Client)?e.m3Client:s(),this.initTimestamp=Date.now(),this.didFirstPoll=!1,e.returnHeaders&&(this.returnHeaders=!0),this.authenticateUser((e=>{if(e)return this.session.active=!1,void this.callback(e,null,this);this.maybeSendAck=((e,t)=>{let n=Date.now();return t=>(Date.now()-n>=3e4&&(n=Date.now(),e()),t)})(this.sendAck),this.retryPolling()}))}}var H=n(61580),$=n.n(H);const E=["phx2","dca1"],T=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.user)throw new Error("RamenJS init error: `options.user` is required");if(!e.user.app)throw new Error("RamenJS init error: `options.user.app` is a required field");this.handlers={message:[],connect:[],disconnect:[],error:[]},this.clients=[],this.disconnectionTimeout=e.disconnectionTimeout||15e3,this.user=e.user;const t=e.dc||e.datacenter||E;return this.dcs=(Array.isArray(t)?t:[t]).reduce(((e,t)=>(e[t]={status:"disconnected",timeout:null},e)),{}),this.authenticationMethod=e.authenticationMethod||"sameorigin",this.m3Client=o(e.m3Client)?e.m3Client:s(),this.mockedClient=e.mockedClient||!1,this}on(e,t){return this.handlers.hasOwnProperty(e)&&(this.handlers[e].push(t),this.initializeClients()),this}off(e,t){if(!this.handlers.hasOwnProperty(e))return this;if(!t&&this.handlers[e].length)this.handlers[e]=[];else{const n=this.handlers[e].indexOf(t);-1!==n&&this.handlers[e].splice(n,1)}return this.hasSubscribers()||this.stopClients(),this}initializeClients(){this.clients.length||this.mockedClient||Object.keys(this.dcs).forEach((e=>{const t=new O({datacenter:e,user:this.user,authenticationMethod:this.authenticationMethod,m3Client:this.m3Client,callback:this.handleClientResponse.bind(this),manager:this});this.clients.push(t)}))}handleClientResponse(e,t,n){if(e){const t=n.session.datacenter;this.dcs[t]&&(this.dcs[t].lastError=e,this.dcs[t].timeout||"disconnected"===this.dcs[t].status||(this.dcs[t].timeout=setTimeout((()=>{this.dcs[t].status="disconnected",this.dcs[t].timeout=null,this.trigger("disconnect",{...this.getConnectionStatus(),error:this.dcs[t].lastError},n)}),this.disconnectionTimeout))),this.trigger("error",e,n)}else if(t){let r=t.msg;try{r=JSON.parse("".concat(r))}catch(e){this.trigger("error","parsing error ".concat(e),n)}this.trigger("message",{...t,msg:r},n)}}trigger(e,t,n){const r=n?{dc:$()(n,"session.datacenter")}:{};this.handlers[e].forEach((e=>{e(t,r)}))}stopClients(){}hasSubscribers(){for(let e of Object.keys(this.handlers))if(this.handlers[e].length)return!0;return!1}getConnectionStatus(){let e=!1,t=!1;return{details:Object.keys(this.dcs).reduce(((n,r)=>{const i=this.dcs[r].status;return"connected"===i?t=!0:e=!0,n[r]=i,n}),{}),status:t?e?"limited":"connected":"disconnected"}}notifyConnection(e){const t=e.session.datacenter,n=$()(this.dcs[t],"timeout");clearTimeout(n);let r="connected"!==$()(this.dcs[t],"status");this.dcs[t]={status:"connected",timeout:null,lastError:null},r&&this.trigger("connect",this.getConnectionStatus(),e)}};var M=n(37725),P=n(51099),z=n(86724),I=n(4982),R=n(47975),B=n(90550),D=n(73086),A=n(81922),L=n(26602),F=n(46816),N=n(29886),j=n(84401),q=n(70919),U=n(57734),X=n(41718),G=n(92346),V=n(34004),K=n(53158),Q=n(14263),J=n(27620),W=n(4897),Y=n(95742),ee=n(79510);const te=["pendingRating","ratingSubmitted","orderRating"],ne=()=>{var e;const t=(0,X.Z)(),n=(0,N.Z)(),i=(0,F.ZP)(),o=(0,M.k6)(),s=(0,G.TH)(),a=(0,P.Z)(),{user:c}=(0,z.Z)(),l=null===(e=c.data)||void 0===e?void 0:e.isLoggedIn;let u=(0,I.Z)("web_ramen");const d=(0,I.Z)("home_membership_modal"),h=(0,I.Z)("nsw_age_verification"),p=(0,D.I0)(),g=(0,A.v)((e=>{let{ramen:t}=e;return t})),f=(0,r.useRef)(0),m=(0,r.useRef)(null),v=(0,r.useRef)({}),b="postmates"===(0,j.Z)(),y=(0,U.kR)(t),_=function(){const e=(0,I.Z)("eater_message_interstitials"),t=(0,K.Z)(),n=(0,F.ZP)(),{search:i,pathname:o}=(0,G.TH)(),{getEaterMessageInterstitialSessionCapper:s}=(0,Q.Z)(),{isSavingsLanding:a,isSavingsLandingInterstitial:c}=(0,W.Z)(),l=a||c,u=(0,r.useCallback)((e=>Boolean((0,M.LX)(o,e))),[o]);return(0,r.useCallback)((r=>{var o;if(null==r||null===(o=r.messages)||void 0===o||!o.length)return!1;const{surface:a,surfaceId:c,message:d}=r.messages[0]||{},h=t({surface:a,surfaceId:c,...d});n("eats:eater_message_ramen_log",{eaterMessage:{ramenMsg:JSON.stringify(r),surface:c||V.cx.UNKNOWN}});const p=String(ee.parse(i)[L.FSm.modalName]),g=te.includes(p),f=Boolean(h),m=null==h?void 0:h.payload,v="modalPayload"===(null==m?void 0:m.type)&&(null==m?void 0:m.modalPayload.uuid)||"",{hasPromotionBanner:b}=(0,J.X)(h);switch(c){case V.cx.HOME_FEED_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.HOME_FEED_PUSH_BOTTOM_MODAL,v)&&f&&!b&&!l&&u(Y.r.home_feed);case V.cx.VERTICAL_FEED_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.VERTICAL_FEED_PUSH_BOTTOM_MODAL,v)&&f&&u(Y.r.vertical_feed);case V.cx.ORDER_TRACKING_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.ORDER_TRACKING_PUSH_BOTTOM_MODAL,v)&&f&&!u(Y.r.vertical_feed);case V.cx.ORDER_COMPLETE_PUSH_BOTTOM_MODAL:return e&&!s(V.cx.ORDER_COMPLETE_PUSH_BOTTOM_MODAL,v)&&!g&&f;default:return!1}}),[i,e,s,n,t,l,u])}(),x=(0,r.useContext)(q.k),k=(0,r.useCallback)((e=>{x.set("chatMessageUuid",e)}),[x]),Z=(0,r.useCallback)((e=>{switch(e.type){case"chat":return void("system"!==e.msg.messageType&&k(e.uuid));case"eater_message_service_screen_messages":if(_(e.msg)){const t=(e.msg.messages||[])[0].surfaceId||"";o.push((0,L.tLx)(s,t))}return;case"home_membership_modal":return void(d&&(i("eats:home_membership_modal_ramen_message_received"),o.push((0,L.bAD)(s,e.uuid))));case"push_web_eats_verification_result":return void(h&&o.push((0,L.fDg)(s,e.msg.flowStatus)));default:return}}),[k,_,o,s,d,i,h]);return(0,r.useEffect)((()=>{if(g.messageQueue.length>0&&f.current<g.messageQueue.length){const e=g.messageQueue.length-1,t=g.messageQueue[e];Z(g.messageMap[t]),f.current=g.messageQueue.length}}),[Z,g]),(0,r.useEffect)((()=>{u&&l&&!m.current&&(m.current=new T({m3Client:a,user:{app:"eats_web",device:"eats-web",deviceId:y||(0,S.Z)(),language:n,origin:"eats-web",source:"eats-web",version:"1.0.0",appVariant:b?"postmates":"ubereats"}}).on("message",(e=>{const t=(0,R.n)(e);return t&&!v.current[t.uuid]&&p((0,B.l)(t)),t&&(v.current[t.uuid]=!0),()=>{m.current&&m.current.off("message")}})))}),[p,l,u,n,a,b,y]),null}},59281:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(18898),i=n(64248),o=n(45055),s=n(1317),a=n(30330);const c=e=>({body1:{fontSize:e.typography.ParagraphXSmall.fontSize,lineHeight:e.typography.ParagraphXSmall.lineHeight},body2:{fontSize:e.typography.ParagraphSmall.fontSize,lineHeight:e.typography.ParagraphSmall.lineHeight},body3:{fontSize:e.typography.ParagraphMedium.fontSize,lineHeight:e.typography.ParagraphMedium.lineHeight},title1:{fontSize:e.typography.ParagraphLarge.fontSize,lineHeight:e.typography.ParagraphLarge.lineHeight},title2:{fontSize:e.typography.HeadingXSmall.fontSize,lineHeight:e.typography.HeadingXSmall.lineHeight},title3:{fontSize:e.typography.HeadingSmall.fontSize,lineHeight:e.typography.HeadingSmall.lineHeight},title4:{fontSize:e.typography.HeadingMedium.fontSize,lineHeight:e.typography.HeadingMedium.lineHeight},title5:{fontSize:"44px",lineHeight:"52px"},title6:{fontSize:"48px",lineHeight:"56px"}}),l=(e,t,n)=>({...t?{fontFamily:"medium"===t?e.typography.LabelMedium.fontFamily:e.typography.ParagraphMedium.fontFamily}:null,...n?c(e)[n]:null}),u=(0,i.zo)("div",{display:"table"}),d=(0,i.zo)("img",{verticalAlign:"middle"}),h=(0,i.zo)("span",(e=>{let{$color:t,$fontSize:n,$fontStyle:r,$textDecoration:i,$theme:o}=e;return{...l(o,r,n),...t?{color:t in o.colors?o.colors[t]:t}:null,...i?{textDecoration:i}:null,verticalAlign:"middle"}})),p=(0,i.zo)("a",(e=>{let{$color:t,$fontSize:n,$fontStyle:r,$theme:i}=e;return{...(0,s.lE)({$theme:i}),...l(i,r,n),verticalAlign:"middle",...t?{color:t in i.colors?i.colors[t]:t}:{}}}));function g(e){return(0,a.tZ)(a.HY,{children:e.lines.map(((t,n)=>(0,a.BX)(r.Fragment,{children:[(0,a.tZ)(u,{children:t.children.map(((e,t)=>"img"===e.type?(0,a.tZ)(d,{width:e.width,height:e.height,src:e.url},t):"text"===e.type?(0,a.tZ)(h,{...e.$as?{$as:e.$as}:null,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,$textDecoration:e.textDecoration,children:e.text},t):"anchor"===e.type?(0,a.tZ)(p,{href:e.href,$color:e.color,$fontStyle:e.fontStyle,$fontSize:e.fontSize,children:e.text},t):null))}),"paragraph"===t.breakStyle&&n!==e.lines.length-1?(0,a.tZ)(o.ZP,{$height:16}):null,"heading"===t.breakStyle?(0,a.tZ)(o.ZP,{$height:8}):null]},n)))})}},21156:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(81922),i=n(60936);const o=()=>(0,r.v)((e=>{let{features:t}=e;return t}))[i.h6.capital_one_promo]},14263:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(77808),i=n(17090),o=n(41718),s=n(57734);const a="uev2.messaging-interstitial-session-capper";function c(){const e=(0,o.Z)(),t=(0,s.Yk)(e),n=(0,i._)(),c=(0,r.useCallback)((()=>n.get(a)||{}),[n]);return{getEaterMessageInterstitialSessionCapper:(0,r.useCallback)(((e,n)=>{const r=c()[e];return(null==r?void 0:r.sessionId)===t&&((null==r?void 0:r.campaigns)||[]).includes(n)}),[c,t]),setEaterMessageInterstitialSessionCapper:(0,r.useCallback)(((e,r)=>{const i=c(),o=i[e],s=(null==o?void 0:o.sessionId)===t&&null!=o&&o.campaigns?o.campaigns:[];s.includes(r)||s.push(r),i[e]={sessionId:t||"",campaigns:s},n.set(a,i)}),[n,t,c])}}},60652:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(46091),i=n(38652);const o=()=>(0,r.ip)({...i.J.scheduled_order_editing,defaultValue:!1})},70535:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(46091),i=n(38652);const o=()=>(0,r.ip)({...i.J.is_repeat_group_order_enabled,defaultValue:!1})},51099:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(9572),i=n(7252);function o(){return(0,r.G2)(i.EK)}},9842:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(77808),i=n(7329);const o=()=>{const[e,t]=(0,r.useState)(!1),[n,o]=(0,i.Z)({root:null});return(0,r.useEffect)((()=>{o&&(e||o.isIntersecting||t(!0),e&&o.isIntersecting&&t(!1))}),[o,e]),{elementRef:n,isStuck:e}}},14384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(77808),i=n(81922),o=n(70919),s=n(95162),a=n(48281);function c(){const e=(0,a.Z)(),t=(0,i.v)((e=>{let{embeddedFeatures:t}=e;return t})),n=(0,r.useContext)(o.k),c=(0,s.Z)("emitXlbHomeFeedEventV1");return(0,r.useCallback)((r=>{let{source:i}=r;if(!e)return;let o=!0;if(t.prefetch){n.set("uev2.xlb_".concat(i,"_impression"),"true");const e=n.get("uev2.xlb_feed_loaded_impression"),t=n.get("uev2.xlb_user_triggered_impression");o=e&&t}o&&c()}),[e,t.prefetch,n,c])}}}]);