"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[48425],{58544:(e,t,r)=>{r.d(t,{Z:()=>d});var i=r(75257),o=r(90997),n=r(91964),a=r(90120),l=r(30330);function d(e){const t=e.button||i.Z,r=(0,n.Z)(e.source),d=(0,a.Z)();return(0,l.tZ)(t,{$as:o.rU,to:d,onClick:()=>{r(),e.onClick&&e.onClick()},children:e.children})}},76747:(e,t,r)=>{r.d(t,{Vk:()=>q,ZP:()=>J,RA:()=>j});var i=r(18898),o=r(72920),n=r(37725),a=r(73086),l=r(81922),d=r(38458),s=r(45055),c=r(30330);function u(e){return e.error&&"string"==typeof e.error.message?e.error.message:(0,c.tZ)(o.v,{id:"shared.genericServerError"})}var v=r(58544),p=r(64248),h=r(90120),_=r(35332),m=r(13241),C=r(71593),g=r(75257),E=r(26602),f=r(91964),y=r(26324),Z=r(54713),T=r(74978),N=r(35907),O=r(50725),D=r(77808),I=r(53636),U=r(20480),R=r(94283),A=r(46816),S=r(76893);const P=()=>{var e;const t=(0,A.ZP)(),{serverCart:r}=(0,T.iQ)(),o=(null===(e=r.data)||void 0===e?void 0:e.items)||[],n=(0,S.dH)(o),{data:a,error:l}=r;i.useEffect((()=>{var e;"DRAFT_ORDER_VALIDATION_ERROR"===(null==l||null===(e=l.meta)||void 0===e?void 0:e.type)&&t("eats:draft_order_validation_error",{quantity:n,storeUuid:null==a?void 0:a.storeUuid,draftOrderUuid:null==a?void 0:a.draftOrderUuid,cartUuid:null==a?void 0:a.cartUuid})}),[l,a,n,t])};var b=r(83158),k=r(27544),x=r(95073),L=r(54008),M=r(89817),B=r(35121),H=r(10247),w=r(88386),$=r(95072);const z=(0,p.zo)("div",(e=>{const{$hasAction:t}=e;return{cursor:t?"pointer":"default",":hover":{backgroundColor:t?"rgba(0,0,0,0.04)":"transparent"},":active":{backgroundColor:t?"rgba(0,0,0,0.08)":"transparent"}}}));function W(e){var t,r,i,o,n,a,l,d,s;let{richBodySection:u}=e;const v=j();if("listItem"!=(null==u?void 0:u.type))return null;const p=null==u||null===(t=u.listItem)||void 0===t||null===(r=t.listContent)||void 0===r?void 0:r.leadingContent,h=null==u||null===(i=u.listItem)||void 0===i||null===(o=i.listContent)||void 0===o?void 0:o.title,_=null==u||null===(n=u.listItem)||void 0===n||null===(a=n.listContent)||void 0===a?void 0:a.trailingContent,m=null==u||null===(l=u.listItem)||void 0===l||null===(d=l.listContent)||void 0===d?void 0:d.hasDivider,C=null==u||null===(s=u.listItem)||void 0===s?void 0:s.action;return h?(0,c.tZ)(z,{$hasAction:!!C&&!!C,onClick:()=>{v(void 0,C,u)},children:(0,c.tZ)($.Z,{leadingContent:p,title:h,trailingContent:_,hasDivider:m})}):null}var G=r(15776),K=r(74995),V=r(18449),F=r(92346);const X=(0,p.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingMedium,display:"flex",marginBottom:"8px"}})),Y=(0,p.zo)("div",(e=>{let{$theme:t}=e;return t.typography.ParagraphMedium})),Q=(0,p.zo)("div",(e=>{let{marginTop:t}=e;return{marginTop:t,display:"flex",alignItems:"center",flexDirection:"column"}}));function j(e){var t;const r=(0,F.TH)(),o=function(){var e;const t=(0,U.Z)(),{deliveryInstructions:r}=(0,D.useContext)(I.X),{upsertDeliveryLocationWithInstruction:i}=(0,R.Z)(),o=(0,a.I0)();return(0,D.useCallback)((async e=>{var n,a,l,s;if(!t)return;const c=(null===(n=r.data)||void 0===n?void 0:n.instructions)||[];let u=c.find((t=>t.interactionType===e));"leave_at_door"!==e||u||(u=c.find((e=>"door_to_door"===e.interactionType))),await i({instruction:{aptOrSuite:(null===(a=u)||void 0===a?void 0:a.aptOrSuite)||"",notes:(null===(l=u)||void 0===l?void 0:l.notes)||"",businessName:(null===(s=u)||void 0===s?void 0:s.businessName)||"",interactionType:e},nickName:t.label||"",location:t}),await o((0,d.Dr)(e))}),[null===(e=r.data)||void 0===e?void 0:e.instructions,t,i])}(),{paymentProfiles:s}=(0,_.IM)(),c=(0,m.Z)(),u=(0,f.Z)("order_estimate_error"),v=(0,h.Z)(),p=(0,n.k6)(),{updateDraftOrder:C}=(0,Z.A4)(),g=(0,N.Z)(),{restaurantLink:y}=(0,O.Z)(),{serverCart:S}=(0,T.iQ)(),P=(0,a.I0)(),k=(null===(t=S.data)||void 0===t?void 0:t.items.length)||0,$=(0,b.Z)(),{openSidebarCart:z,closeSidebarCart:W,sidebarCartVisible:X}=(0,x.Lb)(),{isMobile:Y}=(0,l.v)((e=>{let{device:t}=e;return t})),Q=(0,L.pv)(),j=(0,A.ZP)(),q=(0,B.Z)().storeUUID,J=(0,H.g)(),{diningMode:ee}=(0,w.Z)(),{enqueue:te}=(0,G.Ds)(),re=(0,V.ZP)(),ie=i.useCallback((e=>{e&&te({message:e},K.t.short)}),[te]);return async(t,i,n)=>{var a,l;const h="listItem"===(null==n?void 0:n.type)?null===(a=n.listItem)||void 0===a||null===(l=a.action)||void 0===l?void 0:l.actionParams:null;switch(null==t?void 0:t.type){case"RECUSTOMIZE":{var _,m,f;const e="recustomizeParams"===(null===(_=t.params)||void 0===_?void 0:_.type)&&(null===(m=t.params)||void 0===m||null===(f=m.recustomizeParams)||void 0===f?void 0:f.itemsToRecustomize);if(e){const[t]=e;p.replace((0,E.vN_)(r,"editItem",t))}else p.replace((0,E.C45)(r));return}case"REMOVE_ITEMS":{var Z,T,N;j("eats:checkout_error_remove_items");const e="removeParams"===(null===(Z=t.params)||void 0===Z?void 0:Z.type)&&(null===(T=t.params)||void 0===T||null===(N=T.removeParams)||void 0===N?void 0:N.itemsToRemove);e&&c({shoppingCartItemUUIDs:e});const i=(e||[]).length,o=k-i==0;return void($&&e&&o||p.replace((0,E.C45)(r)))}case"CLEAR_CART":return u(),void p.replace(v);case"RETRY_ESTIMATE":return C({forceUpdate:!0}),void p.replace((0,E.C45)(r));case"SWITCH_PAYMENT":{const e=s&&s.length>0?(0,E.vN_)(r,"paymentsSelectProfile"):(0,E.vN_)(r,"paymentsAddProfile");return void p.replace(e)}case"ADD_PAYMENT":return void p.replace((0,E.vN_)(r,"paymentsAddProfile"));case"SWITCH_DINING_MODE":{var O,D,I;g();const e="switchDiningModeParams"===(null===(O=t.params)||void 0===O?void 0:O.type)&&(null===(D=t.params)||void 0===D||null===(I=D.switchDiningModeParams)||void 0===I?void 0:I.diningMode);return e&&e!==ee&&J(e,{storeUuid:q}),void p.replace((0,E.C45)(r))}case"SWITCH_TO_DOOR_TO_DOOR":return P((0,d.J4)()),Q(),await o("door_to_door"),void p.replace((0,E.C45)(r));case"SWITCH_TO_LEAVE_AT_DOOR":return P((0,d.J4)()),Q(),await o("leave_at_door"),void p.replace((0,E.C45)(r));case"VIEW_CARTS":if(g(),Y){const t=e?(0,E._UC)(e):(0,E.C45)(r);p.replace((0,E.nQQ)(t))}else p.replace((0,E.C45)(r)),z();return;case"NONE":return g(),j("eats:checkout_error_dismiss"),void(e?p.replace(e):p.replace((0,E.C45)(r)));case"GO_TO_MENU":return void p.replace(y);case"CLEAR_CART_AND_REDIRECT_TO_FEED":return u(),void p.replace(v);case"SCHEDULE_ORDER":return P((0,d.J4)()),Q(),void p.replace((0,M.t)(r,{storeUuid:q,entryPoint:"checkout"}));case"REDIRECT_TO_FEED":return void p.replace(v);case"GO_BACK":return g(),void p.replace((0,E.C45)(r))}switch(null==i?void 0:i.actionType){case"NONE":return g(),j("eats:checkout_error_dismiss"),void(e?p.replace(e):p.replace((0,E.C45)(r)));case"SCHEDULE_ORDER":return j("eats:order_validation_recovery_path_clicked",{error:re,storeUuid:q,source:$?"checkout":"cart",type:"SCHEDULE_ORDER"}),void p.replace((0,M.t)(r,{storeUuid:q,entryPoint:"checkout"}));case"REDIRECT_TO_FEED":if(X&&W(),j("eats:order_validation_recovery_path_clicked",{error:re,storeUuid:q,source:$?"checkout":"cart",type:"REDIRECT_TO_FEED"}),p.replace(v),h&&"findAnotherStoreParams"===h.type){var U,R,A,S;const e=((null===(U=h.findAnotherStoreParams)||void 0===U||null===(R=U.snackBarMessage)||void 0===R?void 0:R.richTextElements)||[])[0],t=e&&"text"===e.type?null==e||null===(A=e.text)||void 0===A||null===(S=A.text)||void 0===S?void 0:S.text:null;ie(t)}return;case"SWITCH_TO_PICKUP":{j("eats:order_validation_recovery_path_clicked",{error:re,storeUuid:q,source:$?"checkout":"cart",type:"SWITCH_TO_PICKUP"}),g();const e="PICKUP";return e&&e!==ee&&J(e,{storeUuid:q}),void p.replace((0,E.C45)(r))}case"NOTIFY_WHEN_AVAILABLE":return void p.push((0,E.vN_)(r,"notifyMe"))}}}function q(){return(0,c.BX)(c.HY,{children:[(0,c.tZ)(X,{children:(0,c.tZ)(o.v,{id:"components.genericError.title"})}),(0,c.tZ)(Y,{children:(0,c.tZ)(u,{error:null})}),(0,c.tZ)(s.ZP,{$height:24}),(0,c.tZ)(v.Z,{source:"order_estimate_error",children:(0,c.tZ)(o.v,{id:"shared.clearCart"})})]})}function J(e){const t=e.originUrl,r=e.validationError.alert,i=j(t),o=null==r?void 0:r.primaryButton,n=null==r?void 0:r.secondaryButton,a=(0,b.Z)(),l=(0,A.ZP)(),d=(0,B.Z)().storeUUID,s=null==r?void 0:r.richBody,u=null==s?void 0:s.sections;if(P(),l("eats:order_validation_modal_shown",{error:e.validationError,storeUuid:d,source:a?"checkout":"cart"}),!r||!o)return(0,c.tZ)(q,{});let v="";r.bodyBadges?v=r.bodyBadges.map(((e,t)=>(0,c.tZ)(k.ZP,{badge:e},t))):r.body&&(v=(0,c.tZ)(y.Z,{badge:r.body,baseFont:"ParagraphMedium"}));let p="";var h;return p="string"==typeof r.title?r.title:null===(h=r.title)||void 0===h?void 0:h.text,(0,c.BX)(c.HY,{children:[p?(0,c.tZ)(X,{children:p}):null,(0,c.tZ)(Y,{children:v}),u?u.map(((e,t)=>(0,c.tZ)(W,{richBodySection:e},t))):null,(0,c.BX)(Q,{marginTop:null!=u&&u.length?"16px":"24px",children:[(0,c.tZ)(g.Z,{onClick:()=>{l("eats:order_validation_modal_dismiss",{error:e.validationError,storeUuid:d,source:a?"checkout":"cart"}),i(o)},children:o.title}),n?(0,c.tZ)(C.Z,{onClick:()=>{l("eats:order_validation_modal_dismiss",{error:e.validationError,storeUuid:d,source:a?"checkout":"cart"}),i(n)},children:n.title}):null]})]})}},95645:(e,t,r)=>{r.d(t,{Z:()=>E});var i=r(64248),o=r(19785),n=r(12351);Object.freeze({UNKNOWN:"UNKNOWN",SOLID:"SOLID"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP:"TOP",CENTER:"CENTER"});const a=Object.freeze({UNKNOWN:"UNKNOWN",COMPACT:"COMPACT",REGULAR:"REGULAR"});Object.freeze({UNKNOWN:"UNKNOWN",SELECTED:"SELECTED",UNSELECTED:"UNSELECTED"}),Object.freeze({UNKNOWN:"UNKNOWN",REGULAR:"REGULAR",LARGE:"LARGE"});var l=r(35461);const d=l.lf.SPACING_UNIT_8X,s=l.lf.SPACING_UNIT_2X,c="".concat(d,"px");var u=r(30330);const v=(0,i.zo)("div",(e=>{let{$minHeight:t}=e;return{width:"100%",minHeight:t,display:"flex",flexDirection:"row",alignItems:"center"}})),p=(0,i.zo)("div",(e=>{let{$theme:t,$hasDivider:r,$hasLeadingContent:i,$paddingBorder:o}=e;const n=o;return{display:"flex",flexDirection:"row",flexGrow:2,alignItems:"center",alignSelf:"stretch",padding:i?"".concat(o,"px 16px ").concat(n,"px 0"):"".concat(o,"px 16px"),...r?{borderBottom:"1px solid ".concat(t.colors.borderOpaque)}:{}}})),h=(0,i.zo)("div",(e=>{let{$hasTrailingContent:t,$hasSubtitle:r}=e;return{display:"flex",...t||r?{flexDirection:"column",flexGrow:2}:{}}})),_=(0,i.zo)("div",(e=>{let{$paddingContent:t}=e;return{maxWidth:"48px",padding:"".concat(t,"px 16px"),flexShrink:0}})),m=(0,i.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,padding:"8px 12px",backgroundColor:t.colors.backgroundTertiary,borderRadius:t.borders.pillButtonBorderRadius}})),C=e=>{const{content:t,paddingContent:r}=e;if(!t)return null;switch(t.type){case"illustrationContent":{const{illustration:e}=t.illustrationContent;return(0,u.tZ)(_,{$paddingContent:r,children:(0,u.tZ)(n.SZ,{richIllustration:e})})}default:return null}},g=e=>{const{content:t}=e;if(!t)return null;switch(t.type){case"illustrationContent":{const{illustration:e}=t.illustrationContent;return(0,u.tZ)(n.SZ,{richIllustration:e})}case"actionContent":{const{text:e}=t.actionContent;return(0,u.tZ)(m,{children:e})}default:return null}},E=e=>{const{title:t,subtitle:r,tertiaryTitle:i,leadingContent:n,trailingContent:d,hasDivider:_,size:m}=e.viewModel,E="boolean"==typeof e.hasListDivider?Boolean(e.hasListDivider):Boolean(_),{minHeight:f,padding:y}=function(e){if(!e)return{minHeight:c,padding:s};if(!("fixed"in e))return"customHeight"in e?{minHeight:"".concat((0,l.xq)(e.customHeight),"px")||0,padding:s}:{minHeight:c,padding:s};switch(e.fixed){case a.COMPACT:return{padding:l.lf.SPACING_UNIT_1_5X};case a.REGULAR:case a.UNKNOWN:default:return{minHeight:c,padding:s}}}(m);return(0,u.BX)(v,{$minHeight:f,children:[(0,u.tZ)(C,{content:n,paddingContent:y}),(0,u.BX)(p,{$hasDivider:E,$hasLeadingContent:Boolean(n),$paddingBorder:y,children:[(0,u.BX)(h,{$hasTrailingContent:Boolean(d),$hasSubtitle:Boolean(r),children:[(0,u.tZ)(o.ZP,{text:t}),(0,u.tZ)(o.ZP,{text:r}),(0,u.tZ)(o.ZP,{text:i})]}),(0,u.tZ)(g,{content:d})]})]})}},50725:(e,t,r)=>{r.d(t,{Z:()=>E});var i=r(77808),o=r(25301),n=r(1317),a=r(85288),l=r(26602),d=r(64248),s=r(92346),c=r(27531),u=r(74978),v=r(68910),p=r(90004),h=r(10988),_=r(46816),m=r(95073),C=r(83158),g=r(30330);function E(e){var t,r;const{isDraftOrderCreator:E,isDraftOrderParticipant:f,creatorName:y,hasGroupOrder:Z,orderDisplayName:T,isEditOrder:N,deliveryAddress:O,deliveryTime:D,diningMode:I}=(0,v.Z)(),U=(0,o.T)(),[R]=(0,d.hQ)(),{serverCart:A}=(0,u.iQ)(),S=(0,s.TH)(),{store:P,getStore:b}=(0,c.Z)((null===(t=A.data)||void 0===t?void 0:t.storeUuid)||(null==e?void 0:e.storeUuid),{deliveryAddress:O,deliveryTime:D,diningMode:I,isGroupOrderParticipant:f}),[,k]=(0,d.hQ)(),x=(0,p.Z)(),L=(0,h.Z)(),M=(0,_.ZP)(),{closeSidebarCart:B}=(0,m.Lb)(),H=(0,C.Z)(),w=Z&&T||N&&U("go.edit_group_order")||E&&U("go.your_group_order")||f&&U("go.group_order_title",{firstName:y})||U("components.CheckoutOrderMarketplaceHeader.yourOrder"),$=(null===(r=P.data)||void 0===r?void 0:r.title)||"",z=(0,g.tZ)("span",{className:R({...x?k.typography.LabelMedium:k.typography.LabelSmall,...(0,n.lE)({$theme:k}),color:k.colors.action}),children:$});return{title:w,store:P,storeTitle:$,restaurantLink:P.data?(0,l.gfM)(S,(0,l.Btk)(P.data)):"",restaurantLinkNode:(0,a.P)(U("go.cart_store_name"),{storeName:z}),onGoToStore:i.useCallback((()=>{x&&(L(),b()),M("eats:click_store_link",{source:H?"checkout":"cart",...x&&{activePreferenceType:"draft_order"}}),B()}),[x,M,H,B,L,b])}}},32946:(e,t,r)=>{r.d(t,{Sc:()=>i,Ys:()=>a,no:()=>n,pc:()=>o});const i="UNAVAILABLE_ITEMS",o="STORE_UNAVAILABLE",n="INVALID_DELIVERY_TIME_RANGE",a="RADIUS_REDUCED_BY_SURGE"},18449:(e,t,r)=>{r.d(t,{SV:()=>c,Ut:()=>s,ZP:()=>v,gx:()=>u});var i=r(81922),o=r(76747),n=r(54008),a=r(74978),l=r(32946);const d=new Set([l.Sc,l.no,l.pc,l.Ys]),s=e=>{var t;const r=(0,o.RA)(),i=null==e||null===(t=e.alert)||void 0===t?void 0:t.primaryButton;return i&&(null==e?void 0:e.type)===l.Sc&&"REMOVE_ITEMS"===i.type?()=>r(i):null},c=e=>{var t,r,i;const{draftOrder:o}=(0,a.Dz)();if((null==e?void 0:e.type)!==l.Sc||!o)return[];const n=(null==o||null===(t=o.shoppingCart)||void 0===t?void 0:t.items)||[];let d=[];const s=null==e||null===(r=e.alert)||void 0===r||null===(i=r.primaryButton)||void 0===i?void 0:i.params;s&&"removeParams"===s.type&&(d=s.removeParams.itemsToRemove||[]);let c=[];return d.forEach((e=>{const t=n.find((t=>{let{shoppingCartItemUuid:r}=t;return r===e}));t&&t.title&&c.push(t.title)})),c},u=()=>(0,i.v)((e=>{var t,r;let{draftOrder:i,stores:o}=e;const n=(null===(t=i.draftOrder.data)||void 0===t?void 0:t.draftOrder.storeUuid)||"";return o[n]?null===(r=o[n].data)||void 0===r?void 0:r.orderForLaterInfo:null})),v=()=>{var e;const t=((null===(e=(0,n.CF)().data)||void 0===e?void 0:e.validationErrors)||[])[0];return t&&d.has(t.type)?t:null}},95072:(e,t,r)=>{r.d(t,{Z:()=>l});var i=r(64248),o=r(95645),n=r(30330);const a=(0,i.zo)("div",{width:"inherit"}),l=e=>{let{leadingContent:t,title:r,size:i,trailingContent:l,hasDivider:d}=e;return(0,n.tZ)(a,{"data-sdui":"list-content-wrapper",children:(0,n.tZ)(o.Z,{viewModel:{leadingContent:t,title:r,size:i,trailingContent:l,hasDivider:d},hasListDivider:!0})})}},35907:(e,t,r)=>{r.d(t,{Z:()=>v});var i=r(73086),o=r(38458),n=r(10247),a=r(81818),l=r(90004),d=r(48238),s=r(68910),c=r(54008),u=r(54713);function v(){const e=(0,n.g)(),t=(0,a.Z)(),r=(0,i.I0)(),v=(0,l.Z)(),{updateDraftOrderMutation:p}=(0,u.A4)(),{deliveryTime:h,deliveryAddress:_,diningMode:m,storeUuid:C}=(0,s.Z)(),g=(0,c.pv)();return()=>{r((0,o.J4)()),g(),p.reset(),v?r((0,d.A0)(C,{...h&&{storeScheduledTime:h},..._&&{storeDeliveryLocation:_},...m&&{storeDiningMode:m}})):(_&&t(_,null),m&&e(m))}}}}]);