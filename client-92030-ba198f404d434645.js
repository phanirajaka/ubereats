"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[92030],{14704:(e,t,i)=>{i.d(t,{Z:()=>m});var n=i(18898),s=i(64248),a=i(25335);const o={tiny:1,small:4,regular:8},r=[o.tiny,o.small],l=[o.small,o.tiny],d=function(){let{maxDots:e=0,pageId:t=0,dotsSize:i,dotsSizeSequence:n=[]}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Array.from({length:e},((e,s)=>({pageId:t+s,dotSize:i||n[s]||o.regular})))};var c=i(30330);const p=(0,s.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),u=(0,s.zo)("li",(e=>{let{$theme:t,$filled:i,$inversedDotColor:n,$dotsSize:s=8,$margin:o=4}=e;return{borderRadius:"50%",width:"".concat(s,"px"),height:"".concat(s,"px"),margin:"0 ".concat(o,"px"),...i?{background:n?t.colors.black:t.colors.white}:{background:n?(0,a.uE)(t.colors.black,.24):(0,a.uE)(t.colors.white,.6)}}})),m=function(e){const{currentPage:t,pages:i,inversedDotColor:s,fullDots:a=!0,dotsSize:m}=e,g=n.useMemo((()=>a?4:8),[a]),h=n.useMemo((()=>function(){let{currentPage:e=0,pages:t=1,startFrom:i=0,dots:n=5,outermostDots:s=2,fullDots:a=!0,dotsSize:c=o.regular}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(a)return d({maxDots:t,pageId:i,dotsSize:c});if(t<=1)return d({maxDots:1,pageId:i,dotsSize:o.regular});const p=t-1;e=Math.min(Math.max(e,i),p);const u=e+1,m=Math.min(t,n),g=Math.max(u-m,0),h=Math.max(Math.min(g,s),0),f=Math.max(u-m-h,0),S=f+h,v=Math.max(t-m,0),y=u>m?t-u:v,x=Math.max(Math.min(y,s),0),w=d({maxDots:h,pageId:f,dotsSizeSequence:1===h?r.slice(1):r}),b=d({maxDots:m,pageId:S,dotsSize:o.regular}),E=b[b.length-1].pageId+1,I=d({maxDots:x,pageId:E,dotsSizeSequence:1===y&&h>0?[o.regular]:l});return[...w,...b,...I]}({currentPage:t,pages:i,fullDots:a,dotsSize:m})),[t,i,a,m]);return(0,c.tZ)(p,{children:h.map((t=>{let{pageId:i,dotSize:n}=t;return(0,c.tZ)(u,{$inversedDotColor:s,$filled:i===e.currentPage,$dotsSize:n,$margin:g,onClick:t=>{t.stopPropagation(),e.onClick(i)}},i)}))})}},13118:(e,t,i)=>{i.d(t,{Z:()=>w});var n=i(64248),s=i(89450),a=i(14704),o=i(32567),r=i(30330);const l=(0,n.zo)("ol",{display:"flex",justifyContent:"center",alignItems:"center"}),d=(0,n.zo)("li",(e=>{let{$dotsSize:t=4,$theme:i}=e;return{borderRadius:"50%",width:"".concat(2*t,"px"),height:"".concat(2*t,"px"),margin:"0 3px",background:i.colors.white}})),c=function(e){return(0,r.tZ)(l,{children:[...Array(e.pages).keys()].map((t=>(0,r.tZ)(d,{$dotsSize:t===e.currentPage?(e.dotsSize||0)+2:e.dotsSize,onClick:i=>{i.stopPropagation(),e.onClick(t)}},t)))})};var p=i(18898),u=i(32750),m=i(41494),g=i(31394),h=i(44335);const f=(0,n.zo)("div",{padding:"8px",boxSizing:"border-box",position:"absolute",bottom:0,left:0,right:0,display:"flex",alignItems:"center",justifyContent:"flex-start",overflowY:"hidden",overflowX:"scroll",flexWrap:"nowrap",scrollbarWidth:"none","::-webkit-scrollbar":{display:"none"},boxShadow:"0px -4px 16px rgba(0, 0, 0, 0.12)",scrollBehavior:"smooth",transition:h.pB.default});function S(e){let{currentDisplayIndex:t,slides:i,renderPaginationSlide:n,onClick:s,paginationSlideSize:a}=e;const o=p.useRef(null),l=(0,g.gm)();return p.useEffect((()=>{if(!o.current)return;const e=o.current.scrollWidth;if(t>=3)if("ltr"===l)o.current.scrollLeft=(t-3)*(a+8);else{const i=e-(t-3)*(a+8);o.current.scrollLeft=i}else("ltr"===l&&o.current.scrollLeft>=t*(a+8)||"rtl"===l&&e-o.current.scrollLeft<t*(a+8))&&(o.current.scrollLeft=t*(a+8))}),[t,a,l]),(0,r.tZ)(f,{ref:o,children:(0,r.tZ)(u.Z,{separator:()=>(0,r.tZ)(m.ZP,{$width:"8px"}),children:i.map(((e,i)=>(0,r.tZ)("div",{onClick:()=>s(i),children:n({slide:e,isActive:i===t,index:i})},i)))})})}const v=(0,n.zo)("div",(e=>{let{$height:t,$overflowVisible:i,$disabled:n}=e;return{position:"relative",width:"100%",overflow:i?"visible":"hidden",...t?{height:t}:{},pointerEvents:"".concat(n?"none":"auto")}})),y=(0,n.zo)("div",(e=>{let{$theme:t}=e;return{position:"absolute",bottom:0,width:"100%",padding:"12px 0"}})),x=(0,n.zo)("div",(e=>{let{$dotsBottomPosition:t="16px"}=e;return{bottom:t,position:"absolute",padding:0,margin:"0 auto",width:"100%"}}));function w(e){const{displaySlides:t,displayIndex:i,displayOffset:n,useTransition:l,stopAutoScroll:d,changeDisplaySlide:p,onTransitionEnd:u}=(0,o.Z)({slides:e.slides,pageSize:1,autoScrollInterval:e.autoScrollInterval,onSlidesDisplayed:e.onSlidesDisplayed,initialIndex:e.initialIndex,isInfinite:e.isInfinite,peekAnimation:e.peekAnimation});return 0===e.slides.length?null:1===e.slides.length&&e.slides[0]?(0,r.tZ)(v,{$height:e.height,children:(0,r.tZ)(s.M,{$as:"div",$margin:e.margin,children:e.renderSlide({slide:e.slides[0],carouselSlideProps:{isDummy:!1,isVisible:!0,index:0}})})}):(0,r.BX)(v,{$height:e.height,$overflowVisible:e.overflowVisible,$disabled:e.disabled,children:[(0,r.tZ)(s.Z,{displayIndex:i,displayOffset:n,displaySlides:t,onSwipe:d,renderSlide:e.renderSlide,useTransition:l,onTransitionEnd:()=>{if(u(),"function"==typeof e.onTransitionEnd){const t=e.slides[i];e.onTransitionEnd(i,t)}},changeDisplaySlide:p,margin:e.margin,isInfinite:e.isInfinite}),"regular"===e.dotsType?(0,r.tZ)(x,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,r.tZ)(a.Z,{dotsSize:e.dotsSize,pages:e.slides.length,inversedDotColor:e.inversedDotColor,currentPage:i,fullDots:e.fullDots,onClick:e=>{p({index:e})}})}):null,"large"===e.dotsType?(0,r.tZ)(y,{children:(0,r.tZ)(x,{$dotsBottomPosition:e.dotsBottomPosition,children:(0,r.tZ)(c,{dotsSize:e.dotsSize,pages:e.slides.length,currentPage:i,onClick:e=>{p({index:e})}})})}):null,e.paginationSlideProps?(0,r.tZ)(S,{currentDisplayIndex:i,slides:e.slides,renderPaginationSlide:e.paginationSlideProps.renderPaginationSlide,onClick:e=>p({index:e}),paginationSlideSize:e.paginationSlideProps.slideSize}):null]})}},89450:(e,t,i)=>{i.d(t,{M:()=>m,Z:()=>g});var n=i(77808),s=i(18898),a=i(64248);const o={swipeStart:null,swipeStartY:0,swipeOffset:0,lastSwipeStartTime:0,didLastSwipeStartAsTouch:!1,isSwipe:null};function r(e,t){let{x:i,y:n,timestamp:s}=t,a=e.isSwipe;if(e.swipeStart&&null===a&&s-e.lastSwipeStartTime>60){const t=Math.abs(i-e.swipeStart),s=Math.abs(n-e.swipeStartY);a=t>8&&s<50}return a}function l(e,t){switch(t.type){case"swipe start":return{isSwipe:null,swipeStart:t.x,swipeStartY:t.y,swipeOffset:0,lastSwipeStartTime:t.timestamp,didLastSwipeStartAsTouch:t.isTouch};case"swipe move":if(e.swipeStart){const{x:i,y:n,timestamp:s}=t;return{...e,swipeOffset:t.x-e.swipeStart,isSwipe:r(e,{x:i,y:n,timestamp:s})}}return e;case"swipe end":return o;default:throw new Error}}const d=e=>{e.cancelable&&e.preventDefault()};var c=i(31394),p=i(30330);const u=(0,a.zo)("ol",(e=>({margin:0,padding:0,display:"flex",userSelect:"none",willChange:"transform",...e.$useTransition?{transition:"transform 200ms ease-in-out"}:{}}))),m=(0,a.zo)("li",(e=>{let{$margin:t}=e;return{width:"100%",margin:"0 ".concat(t/2,"px"),flex:"none",display:"flex"}}));function g(e){let{displaySlides:t,renderSlide:i,displayIndex:a,displayOffset:g,useTransition:h,onTransitionEnd:f,onSwipe:S,changeDisplaySlide:v,margin:y,isInfinite:x}=e;const w=(0,n.useRef)(null),b=(0,c.gm)(),E=t.findIndex((e=>{let{displayIndex:t}=e;return t===a}));!function(e){let{swipeTargetRef:t,onSwipeEnd:i,onSwipeMove:s}=e;const a=!0,[c,p]=(0,n.useReducer)(l,o),u=(0,n.useCallback)((e=>{e instanceof TouchEvent&&1!==e.touches.length||p({type:"swipe start",x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,timestamp:e.timeStamp,isTouch:!0})}),[]),m=(0,n.useCallback)((e=>{e.preventDefault(),c.didLastSwipeStartAsTouch&&Math.abs(e.timeStamp-c.lastSwipeStartTime)<200||p({type:"swipe start",x:e.pageX,y:e.pageY,timestamp:e.timeStamp,isTouch:!1})}),[c.didLastSwipeStartAsTouch,c.lastSwipeStartTime]),g=(0,n.useCallback)((e=>{if(e instanceof TouchEvent&&1!==e.touches.length)return;const{x:t,y:i}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};r(c,{x:t,y:i,timestamp:e.timeStamp})&&c.swipeStart&&s(t-c.swipeStart),p({type:"swipe move",x:t,y:i,timestamp:e.timeStamp})}),[c,s]),h=(0,n.useCallback)((e=>{if(e instanceof TouchEvent&&0!==e.touches.length)return;const{x:t,y:n}=e instanceof MouseEvent?{x:e.pageX,y:e.pageY}:{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY};r(c,{x:t,y:n,timestamp:e.timeStamp})&&c.swipeStart&&i(t-c.swipeStart),p({type:"swipe end"})}),[c,i]);(0,n.useEffect)((()=>{const e=Math.abs(c.swipeOffset)>8&&a;return e&&document.addEventListener("touchmove",d,{passive:!1}),()=>{e&&document.removeEventListener("touchmove",d,{passive:!1})}}),[c.swipeOffset,a]),(0,n.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchstart",u,{passive:!0}),e.addEventListener("mousedown",m)),()=>{e&&(e.removeEventListener("touchstart",u,{passive:!0}),e.removeEventListener("mousedown",m))}}),[t,u,m]),(0,n.useEffect)((()=>{const e=t.current;return e&&(e.addEventListener("touchmove",g,{passive:!1}),e.addEventListener("touchend",h,{passive:!0})),()=>{e&&(e.removeEventListener("touchmove",g,{passive:!1}),e.removeEventListener("touchend",h,{passive:!0}))}}),[t,g,h,a]),(0,n.useEffect)((()=>{const e=c.swipeStart&&!c.didLastSwipeStartAsTouch;return e&&(document.addEventListener("mousemove",g),document.addEventListener("mouseup",h)),()=>{e&&(document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h))}}),[c.swipeStart,c.didLastSwipeStartAsTouch,g,h])}({swipeTargetRef:w,onSwipeMove:(0,n.useCallback)((e=>{const i=0===a?1:-1,n=(a===t.length-1&&e<0||0===a&&e>0)&&!x,s=Math.abs(e)>40?40*i:e;v({index:a,offset:n?s:e,useTransition:!1}),S&&S()}),[a,v,S,t.length,x]),onSwipeEnd:(0,n.useCallback)((e=>{Math.abs(e)<40?v({index:a,offset:0}):e<0?v({index:"ltr"===b?"forward":"back"}):e>0&&v({index:"ltr"===b?"back":"forward"})}),[a,v,b])});const I=s.useMemo((()=>t.map(((e,t)=>{let{slide:n,displayIndex:s,isDummy:o}=e;return(0,p.tZ)(m,{"aria-hidden":!!o||void 0,$margin:y,children:i({slide:n,carouselSlideProps:{isDummy:o,isVisible:s===a,index:t}})},s)}))),[i,t,a,y]),T="ltr"===b?-1:1;return(0,p.tZ)(u,{$useTransition:h,style:{transform:"translateX(".concat(E*T*100,"%)")+" "+"translateX(".concat(g,"px)")+"translateX(".concat(E*T*y+T*y/2,"px)")},ref:w,onTransitionEnd:f,children:I})}},92030:(e,t,i)=>{i.d(t,{Z:()=>E});var n=i(34004),s=i(2123),a=i(13118),o=i(79476),r=i(38798),l=i(62855);const d={titleFont:{[n._u.REGULAR]:{LEVEL_1:{typographyName:"DisplayBold5XSmall",lineHeight:"22px",fontSize:"18px"},DEFAULT:{typographyName:"DisplayBold4XSmall",lineHeight:"28px"}},[n._u.SMALL]:{LEVEL_1:{typographyName:"LabelXSmall"},DEFAULT:{typographyName:"LabelMedium"}}}},c=(e,t,i)=>({CARD:{getContentPadding:e=>t===n._u.REGULAR?e===r.zK.FULLWIDTH?{padding:"12px 16px"}:"ltr"===i?{padding:"12px 8px 12px 16px"}:{padding:"12px 16px 12px 8px"}:{padding:"12px 16px"},getTitleFont:e=>{let{$theme:i,$fontSizeLevel:n=2}=e;const s=(0,l.Om)(t),a=1===n?"LEVEL_1":"DEFAULT",o=d.titleFont[s][a];return{...i.typography[o.typographyName],..."lineHeight"in o?{lineHeight:o.lineHeight}:{},..."fontSize"in o?{fontSize:o.fontSize}:{}}},getSubtitleFont:e=>{let{$theme:i}=e;return t===n._u.REGULAR?i.typography.ParagraphXSmall:i.typography.ParagraphSmall},getCtaFont:e=>{let{$theme:t}=e;return{...t.typography.LabelXSmall,paddingTop:t.sizing.scale100,paddingBottom:t.sizing.scale100,paddingLeft:t.sizing.scale300,paddingRight:t.sizing.scale300}},getLayoutSize:()=>t===n._u.REGULAR?{minHeight:"".concat(s.lC,"px"),cardAspectRatio:"".concat(100*s.Jh,"%"),splitImageAspectRatio:"".concat(100*s.Bu,"%"),splitImageFit:"cover",spacer:"4px"}:{minHeight:"".concat(s.PO,"px"),cardAspectRatio:"".concat(100*s.Kk,"%"),splitImageAspectRatio:"".concat(100*s.eo,"%"),splitImageFit:"cover",spacer:"2px"}}});var p=i(36100),u=i(39201),m=i(76319),g=i(31394),h=i(30330);const f=e=>{let{cardCarousel:t,surface:i,verticalPosition:r}=e;const l=(0,g.gm)(),d=t.template||"",{filteredItems:f,initialIndex:S,onSlidesDisplayed:v}=(0,p.Z)(t.carouselItems||[],i,d,r);if(!f.length)return null;const y=(0,m.N)(t),x=(0,m.f)(y),w=1===f.length,b=w?0:s.yf,E=w?0:t.shouldAutoScroll&&i===n.cx.HOME_FEED_ITEM?x||4e3:0;return(0,h.tZ)(u.K2,{children:(0,h.tZ)(u.qY,{$centerPadding:s.Ub,children:(0,h.tZ)(a.Z,{autoScrollInterval:E,initialIndex:S,slides:f,renderSlide:e=>{let{slide:t,carouselSlideProps:n}=e;return(0,h.tZ)(o.Z,{slides:f,template:d,slide:t,surface:i,verticalPosition:r,carouselSlideProps:n,eaterMessageStyles:c(0,d,l)})},onSlidesDisplayed:v,margin:b,dotsType:"disabled",overflowVisible:!0})})})};var S=i(77808),v=i(46816),y=i(44599),x=i(24413),w=i(84312);const b=e=>{var t;let{cardItem:i,surface:n,verticalPosition:s}=e;const[a,o]=(0,S.useState)(!1),r=(0,v.ZP)(),l=(0,S.useMemo)((()=>{var e;return{uuid:i.uuid||"",trackingID:(null===(e=i.metadata)||void 0===e?void 0:e.trackingID)||"",itemType:"cardItemPayload",verticalPosition:s}}),[i.uuid,null===(t=i.metadata)||void 0===t?void 0:t.trackingID,s]),d=(0,S.useMemo)((()=>({eaterMessage:{...l,surface:n}})),[l,n]);(0,S.useEffect)((()=>{r("eats:eater_message_view",d)}),[r,d]);const c=i.cardItem,p=e=>{e.stopPropagation(),e.preventDefault(),o(!0),r("eats:eater_message_dismiss",d)};switch(null==c?void 0:c.type){case"systemBanner":{var u;if(a)return null;const{systemBanner:e}=c,t=()=>(0,h.tZ)(x.Z,{dismissAction:p,systemBanner:e,systemBannerStyles:{getContentPadding:()=>({padding:"16px"})}});return(0,h.tZ)(w.Z,{messageKey:"system-banner",children:null!==(u=e.cta)&&void 0!==u&&u.action?(0,h.tZ)(y.ZP,{linkStyleType:y.co.BANNER,action:e.cta.action,actionTrackingID:e.cta.trackingID||"",surface:n,analytics:l,children:t()}):t()})}}return null},E=e=>{let{eaterMessage:{payload:t,surfaceId:i},feedIndex:n=0}=e;if(!t)return null;let s=null;switch(t.type){case"cardCarousel":s=(0,h.tZ)(f,{cardCarousel:t.cardCarousel,surface:i||"",verticalPosition:n});break;case"cardItemPayload":s=(0,h.tZ)(b,{cardItem:t.cardItemPayload,surface:i||"",verticalPosition:n})}return s?(0,h.tZ)(h.HY,{children:s}):null}}}]);