"use strict";(self.webpackChunkFusion=self.webpackChunkFusion||[]).push([[77009],{93197:(e,t,i)=>{i.d(t,{cz:()=>r});const r=Object.freeze({UNKNOWN:"UNKNOWN",ALCOHOL_EXCEEDED_PER_ORDER_LIMIT:"ALCOHOL_EXCEEDED_PER_ORDER_LIMIT",MISSING_REQUIRED_FOOD_WITH_ALCOHOL:"MISSING_REQUIRED_FOOD_WITH_ALCOHOL",MAX_FARE_LIMIT_EXCEEDED:"MAX_FARE_LIMIT_EXCEEDED",ALCOHOL_WITH_CASH:"ALCOHOL_WITH_CASH",PICKUP_WITH_CASH:"PICKUP_WITH_CASH",PRODUCT_NOT_FOUND_AT_ORDER:"PRODUCT_NOT_FOUND_AT_ORDER",CART_ITEM_INVALID_UUID:"CART_ITEM_INVALID_UUID",CART_ITEM_SUSPENDED:"CART_ITEM_SUSPENDED",ALCOHOL_WITH_LEAVE_AT_DOOR:"ALCOHOL_WITH_LEAVE_AT_DOOR",CASH_WITH_LEAVE_AT_DOOR_MANDATORY:"CASH_WITH_LEAVE_AT_DOOR_MANDATORY",CASH_WITH_LEAVE_AT_DOOR_OPTIONAL:"CASH_WITH_LEAVE_AT_DOOR_OPTIONAL",BYOC_WITH_LEAVE_AT_DOOR:"BYOC_WITH_LEAVE_AT_DOOR",FORCE_LEAVE_AT_DOOR:"FORCE_LEAVE_AT_DOOR",STORE_UNAVAILABLE:"STORE_UNAVAILABLE",FULFILLMENT_ISSUE_NOT_RESOLVED:"FULFILLMENT_ISSUE_NOT_RESOLVED",NO_SUCH_STORE:"NO_SUCH_STORE",ITEMS_FROM_TOO_MANY_STORES:"ITEMS_FROM_TOO_MANY_STORES",INVALID_DELIVERY_TIME_RANGE:"INVALID_DELIVERY_TIME_RANGE",INVALID_DISPATCH_RADIUS:"INVALID_DISPATCH_RADIUS",INVALID_PAYMENT_PROFILE:"INVALID_PAYMENT_PROFILE",UNSUPPORTED_PAYMENT_PROFILE:"UNSUPPORTED_PAYMENT_PROFILE",STORE_CLOSED_CHECKOUT:"STORE_CLOSED_CHECKOUT",DINING_MODE_NOT_AVAILABLE:"DINING_MODE_NOT_AVAILABLE",SCHEDULE_ORDER_UNAVAILABLE:"SCHEDULE_ORDER_UNAVAILABLE",BACKGROUND_CHECK_FAILED:"BACKGROUND_CHECK_FAILED",UNAVAILABLE_ITEMS:"UNAVAILABLE_ITEMS",ITEMS_WITH_UNAVAILABLE_CUSTOMIZATIONS:"ITEMS_WITH_UNAVAILABLE_CUSTOMIZATIONS",MISCONFIGURED_ITEMS:"MISCONFIGURED_ITEMS",RADIUS_REDUCED_BY_SURGE:"RADIUS_REDUCED_BY_SURGE",GEOBOUND_BLOCKED:"GEOBOUND_BLOCKED",SCHEDULED_ORDER_NOT_EDITABLE:"SCHEDULED_ORDER_NOT_EDITABLE",INVALID_BASKET:"INVALID_BASKET",PIN_ORDER_WITH_LEAVE_AT_DOOR:"PIN_ORDER_WITH_LEAVE_AT_DOOR",NO_PAYMENT_METHOD:"NO_PAYMENT_METHOD",MARKETPLACE_HOURS_BLOCKED:"MARKETPLACE_HOURS_BLOCKED",STORE_UNAVAILABLE_BUT_SCHEDULABLE:"STORE_UNAVAILABLE_BUT_SCHEDULABLE",ALCOHOL_ORDER_BEYOND_SALES_HOURS:"ALCOHOL_ORDER_BEYOND_SALES_HOURS",INVALID_LEAVE_AT_DOOR_DELIVERY:"INVALID_LEAVE_AT_DOOR_DELIVERY",SCHEDULED_TIME_IN_THE_PAST:"SCHEDULED_TIME_IN_THE_PAST",ITEM_LIMITS_EXCEEDED:"ITEM_LIMITS_EXCEEDED",SURGE_MINIMUM_BASKET_NOT_MET:"SURGE_MINIMUM_BASKET_NOT_MET",NUDGE_TO_SCHEDULE:"NUDGE_TO_SCHEDULE",CART_LIMIT_EXCEEDED:"CART_LIMIT_EXCEEDED",CLOSING_TOO_SOON_TO_DELIVER:"CLOSING_TOO_SOON_TO_DELIVER"});Object.freeze({UNKNOWN:"UNKNOWN",DIALOG:"DIALOG",FULL_PAGE:"FULL_PAGE"}),Object.freeze({NONE:"NONE",RECUSTOMIZE:"RECUSTOMIZE",REMOVE_ITEMS:"REMOVE_ITEMS",CLEAR_CART:"CLEAR_CART",RETRY_ESTIMATE:"RETRY_ESTIMATE",SWITCH_PAYMENT:"SWITCH_PAYMENT",ADD_PAYMENT:"ADD_PAYMENT",SWITCH_TO_DOOR_TO_DOOR:"SWITCH_TO_DOOR_TO_DOOR",SWITCH_TO_LEAVE_AT_DOOR:"SWITCH_TO_LEAVE_AT_DOOR",OPEN_DEEPLINK:"OPEN_DEEPLINK",OPEN_WEBVIEW:"OPEN_WEBVIEW",REDIRECT_TO_FEED:"REDIRECT_TO_FEED",GET_ORDER_SUMMARY:"GET_ORDER_SUMMARY",SWITCH_DINING_MODE:"SWITCH_DINING_MODE",CLEAR_CART_AND_REDIRECT_TO_FEED:"CLEAR_CART_AND_REDIRECT_TO_FEED",CLEAR_CART_AND_REDIRECT_TO_ORDERS_TAB:"CLEAR_CART_AND_REDIRECT_TO_ORDERS_TAB",CONTINUE_WITHOUT_VOUCHER:"CONTINUE_WITHOUT_VOUCHER",REMOVE_INVALID_PARTICIPANTS:"REMOVE_INVALID_PARTICIPANTS",GO_BACK:"GO_BACK",REDIRECT_TO_FEED_AND_UPDATE_FEED_ADDRESS:"REDIRECT_TO_FEED_AND_UPDATE_FEED_ADDRESS",SELECT_DIFFERENT_DELIVERY_ADDRESS:"SELECT_DIFFERENT_DELIVERY_ADDRESS",REVIEW_ITEMS:"REVIEW_ITEMS",SWITCH_TO_PICKUP:"SWITCH_TO_PICKUP",SCHEDULE_ORDER:"SCHEDULE_ORDER",GO_TO_STORE:"GO_TO_STORE",NOTIFY_WHEN_AVAILABLE:"NOTIFY_WHEN_AVAILABLE"}),Object.freeze({CHECKOUT_ORDER_ERROR:"CHECKOUT_ORDER_ERROR"}),Object.freeze({DEFAULT:"DEFAULT",CVV_VERIFY:"CVV_VERIFY",BAV_VERIFY:"BAV_VERIFY",CARDIO:"CARDIO"}),Object.freeze({ORDER_ALERT_ERROR:"ORDER_ALERT_ERROR"})},34720:(e,t,i)=>{i.d(t,{he:()=>n,mP:()=>r}),Object.freeze({UNKNOWN:"UNKNOWN",CART_ITEMS:"CART_ITEMS",FARE_BREAKDOWN:"FARE_BREAKDOWN",PROMOTION:"PROMOTION",UPFRONT_TIPPING:"UPFRONT_TIPPING",ETA:"ETA",PASS_BANNER:"PASS_BANNER",BASKET_SIZE_TRACKER:"BASKET_SIZE_TRACKER",DELIVERY_OPTIN_INFO:"DELIVERY_OPTIN_INFO",FULFILLMENT_PROMOTION_INFO:"FULFILLMENT_PROMOTION_INFO",CART_ITEM_PROMOTIONS:"CART_ITEM_PROMOTIONS",DISCLAIMERS:"DISCLAIMERS",SUBTOTAL:"SUBTOTAL",TOTAL:"TOTAL",ORDER_CONFIRMATIONS:"ORDER_CONFIRMATIONS",ADDRESS_NUDGE:"ADDRESS_NUDGE",COMPLEMENTS:"COMPLEMENTS",MEAL_VOUCHERS:"MEAL_VOUCHERS",UBER_CASH_REWARD:"UBER_CASH_REWARD",DINING_MODE:"DINING_MODE",GIFT_INFO:"GIFT_INFO",RENEW_BANNER:"RENEW_BANNER",CHECKOUT_FORM:"CHECKOUT_FORM",TAX_PROFILES:"TAX_PROFILES",LOCATION_INFO:"LOCATION_INFO",MESSAGE_BANNER:"MESSAGE_BANNER",BASKET_SIZE:"BASKET_SIZE",UPFRONT_TIPPING_AUTO_SUBMIT_GROUP_ORDER:"UPFRONT_TIPPING_AUTO_SUBMIT_GROUP_ORDER",FARE_BREAKDOWN_COLLAPSED:"FARE_BREAKDOWN_COLLAPSED",AUTONOMOUS_DELIVERY_MESSAGE:"AUTONOMOUS_DELIVERY_MESSAGE",MERCHANT_MEMBERSHIP:"MERCHANT_MEMBERSHIP",ORDER_SUMMARY:"ORDER_SUMMARY",ALL_DETAILS_HEADER:"ALL_DETAILS_HEADER",ALL_DETAILS_ACTIONS:"ALL_DETAILS_ACTIONS",RESTRICTED_ITEMS:"RESTRICTED_ITEMS",TIME_WINDOW_PICKER:"TIME_WINDOW_PICKER",VENUE_SECTION_PICKER:"VENUE_SECTION_PICKER",DINE_IN_METADATA:"DINE_IN_METADATA",ILLUSTRATION:"ILLUSTRATION",IN_REVIEW_ITEM_DETAILS_PAYLOAD:"IN_REVIEW_ITEM_DETAILS_PAYLOAD",FULFILLED_ITEM_DETAILS_PAYLOAD:"FULFILLED_ITEM_DETAILS_PAYLOAD",UNFULFILLED_ITEM_DETAILS_PAYLOAD:"UNFULFILLED_ITEM_DETAILS_PAYLOAD",UPSELL_CATALOG_SECTIONS:"UPSELL_CATALOG_SECTIONS",CART_BASKET_SIZE_TRACKER:"CART_BASKET_SIZE_TRACKER",CANONICAL_PRODUCT_STORE_PICKER:"CANONICAL_PRODUCT_STORE_PICKER",MEMBERSHIP_RENEWAL_BANNER:"MEMBERSHIP_RENEWAL_BANNER"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP_NON_STICKY_BANNER:"TOP_NON_STICKY_BANNER"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP_NON_STICKY_BANNER:"TOP_NON_STICKY_BANNER"});const r=Object.freeze({UNKNOWN:"UNKNOWN",UNAVAILABLE:"UNAVAILABLE"}),n=(Object.freeze({UNKNOWN:"UNKNOWN",REPLACE:"REPLACE",REMOVE:"REMOVE"}),Object.freeze({UNKNOWN:"UNKNOWN",CUSTOMIZATION:"CUSTOMIZATION",ALLERGY_REQUEST:"ALLERGY_REQUEST",SPECIAL_INSTRUCTION:"SPECIAL_INSTRUCTION",REPLACEMENT_PREFERENCE:"REPLACEMENT_PREFERENCE",QUANTITY_INFO:"QUANTITY_INFO"}),Object.freeze({DEFAULT:"DEFAULT",BASE_COMPONENTS:"BASE_COMPONENTS",GRATITUDE:"GRATITUDE"}),Object.freeze({UNKNOWN:"UNKNOWN",NONE_AVAILABLE:"NONE_AVAILABLE",AVAILABLE:"AVAILABLE",SELECTED_NOT_APPLIED:"SELECTED_NOT_APPLIED",SELECTED_AND_APPLIED:"SELECTED_AND_APPLIED",DISABLED:"DISABLED"}),Object.freeze({UNKNOWN:"UNKNOWN",TOP_NON_STICKY_BANNER:"TOP_NON_STICKY_BANNER"}),Object.freeze({UNKNOWN:"UNKNOWN",POSITIVE:"POSITIVE",NEGATIVE:"NEGATIVE",MEMBERSHIP:"MEMBERSHIP"}),Object.freeze({UNKNOWN:"UNKNOWN",ICON:"ICON",LOTTIE:"LOTTIE",RESERVED_3:"RESERVED_3",RESERVED_4:"RESERVED_4",RESERVED_5:"RESERVED_5",RESERVED_6:"RESERVED_6"}),Object.freeze({UNKNOWN:"UNKNOWN",NO_RUSH_DELIVERY:"NO_RUSH_DELIVERY",STANDARD_DELIVERY:"STANDARD_DELIVERY",PREMIUM_DELIVERY:"PREMIUM_DELIVERY",ETD_SURGE_DELIVERY:"ETD_SURGE_DELIVERY",SCHEDULE_DELIVERY:"SCHEDULE_DELIVERY",OPT_IN_TYPE_RESERVED_6:"OPT_IN_TYPE_RESERVED_6",OPT_IN_TYPE_RESERVED_7:"OPT_IN_TYPE_RESERVED_7"}),Object.freeze({UNKNOWN:"UNKNOWN",STACK:"STACK",CAROUSEL_LIST:"CAROUSEL_LIST",CAROUSEL_GRID:"CAROUSEL_GRID"}),Object.freeze({UNKNOWN:"UNKNOWN",PERSONAL:"PERSONAL",BUSINESS:"BUSINESS"}),Object.freeze({UNKNOWN:"UNKNOWN",DISABLED:"DISABLED",GET_CONTEXT:"GET_CONTEXT"}),Object.freeze({UNKNOWN:"UNKNOWN",LIST:"LIST"}),Object.freeze({UNKNOWN:"UNKNOWN",MANUAL_COLLECT_DOB:"MANUAL_COLLECT_DOB",IDENTITY_VERIFICATION_COLLECT:"IDENTITY_VERIFICATION_COLLECT"}));Object.freeze({UNKNOWN:"UNKNOWN",REGULAR:"REGULAR",VENUE_TO_SEAT_DELIVERY:"VENUE_TO_SEAT_DELIVERY"})},46311:(e,t,i)=>{i.d(t,{Z:()=>K});var r=i(77808),n=i(37725),o=i(90997),l=i(26602),E=i(64248),a=i(95073),d=i(72920),_=i(68910),s=i(92689),u=i(48469),c=i(86724),O=i(48445),I=i(50725),T=i(74978),A=i(53636),N=i(36182),R=i(4281),D=i(53567),S=i(35121),C=i(78506),L=i(7961),p=i(46091),h=i(38652);const U=()=>(0,p.ip)({...h.J.guest_checkout_webshop,defaultValue:!1});var m=i(40324),v=i(25301),Z=i(75257),M=i(46816),P=i(44501),g=i(25130),B=i(92346),y=i(30330);const f=e=>{var t;const i=(0,M.ZP)(),r=(0,M.XL)(),n=(0,v.T)(),{inCartItemXP:E}=(0,C.Z)(),{restaurantLink:a,onGoToStore:s}=(0,I.Z)(),{serverCart:u}=(0,T.iQ)(),c=(0,N.ZP)(void 0,!(null!==(t=u.data)&&void 0!==t&&t.isOwner)),{isDraftOrderCreator:O,hasGroupOrder:A,isBillSplitOrder:R,isEditOrder:D}=(0,_.Z)(),{isOnPremiseDeliveryOrder:S}=(0,L.Z)(),p=(0,B.TH)(),h="eats:checkout_button",U={checkoutType:"coi",isBillSplitOrder:R,isDraftOrderParticipant:!O,isGuestOrder:e.isGuestMode,isGroupOrder:A,isEditScheduledOrder:D};return 0===c?(0,y.tZ)(Z.Z,{$as:o.rU,to:a,onClick:s,children:(0,y.tZ)(d.v,{id:"shared.addItems"})}):S?(0,y.tZ)(Z.Z,{$as:o.rU,rel:"nofollow",to:e.authHref?{}:(0,l.vN_)(p,"premiseDeliveryInfo"),href:e.authHref,onClick:async t=>{e.disabled?t.preventDefault():e.onClick(t)},disabled:e.disabled,children:n("shared.go_to_checkout")}):(0,y.BX)(Z.Z,{$as:o.rU,rel:"nofollow",to:e.authHref?{}:e.checkoutUrl,href:e.authHref,"data-testid":"go-to-checkout-button",onClick:async t=>{e.disabled?t.preventDefault():(e.authHref?await r(h,U):i(h,U),e.onClick(t))},disabled:e.disabled,children:[n("shared.go_to_checkout"),E?null:(0,y.BX)(y.HY,{children:[(0,y.tZ)(P.Z,{color:"buttonPrimaryText",typography:"LabelLarge"}),(0,y.tZ)(g.Z,{})]})]})};var b=i(49185),V=i(44856),H=i(45460);const z=(0,E.w1)(s.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}})),F=(0,E.w1)(b.Z,(e=>{let{$theme:t}=e;return{marginTop:t.sizing.scale300}}));function W(e,t,i){if("secondary_btn"!==e&&"tertiary_btn"!==e)return null;const r="secondary_btn"===e?z:F;return(0,y.tZ)(r,{$as:o.rU,to:t,disabled:i,children:(0,y.tZ)(d.v,{id:"checkout_as_guest"})})}const K=e=>{var t,i;const E=(0,B.TH)(),s=(0,n.k6)(),{hideSidebarCart:p}=(0,a.Lb)(),{isDraftOrderCreator:h,isDraftOrderCartLocked:v,storeUuid:Z,isBillSplitParticipant:M,currentUserGroupedItems:P}=(0,_.Z)(),{user:g}=(0,c.Z)(),b=t=>{e.onClick&&e.onClick(t)},{disableCheckout:F}=(0,O.f)(),{inCartItemXP:K}=(0,C.Z)(),{isEnabled:G,treatment:k}=(0,H.Z)(),{guestCheckoutEnabled:Y,emitGuestCheckoutEvent:X,guestCheckoutInGuestModeXP:x}=(0,R.Z)(),{selectedInstruction:$}=(0,r.useContext)(A.X),{data:w,isFetching:j,isLoading:Q}=(0,D.h)({interactionType:null==$?void 0:$.interactionType},{queryObserverOptions:{enabled:Boolean(Y)}}),q=Y&&(j||Q),J=null==w?void 0:w.isEligible,ee=U(),te=(0,m.Z)(),{isOnPremiseDeliveryOrder:ie}=(0,L.Z)();(0,r.useEffect)((()=>{q||X(J)}),[X,q,J]);const re=e.$disabled||F||q,{restaurantLink:ne,onGoToStore:oe}=(0,I.Z)(),{serverCart:le}=(0,T.iQ)(),Ee=(0,N.ZP)(void 0,!(null!==(t=le.data)&&void 0!==t&&t.isOwner)),{isGroupOrder:ae,isScheduledOrder:de}=(0,S.Z)(Z),_e=Boolean(J&&Y&&!ae&&!de),se=ee&&te,ue=ie?(0,l.vN_)(E,"premiseDeliveryInfo"):h&&!v?(0,l.vN_)(E,"lockGroupCart"):(0,l.Zs0)(E);return null!==(i=g.data)&&void 0!==i&&i.isLoggedIn||se?M&&null!=P&&P.confirmed?(0,y.tZ)(V.zx,{isFullWidth:!0,onClick:()=>{s.push(ne),oe()},disabled:v,children:(0,y.tZ)(d.v,{id:"shared.addItems"})}):(0,y.BX)(y.HY,{children:[(0,y.tZ)(f,{isGuestMode:_e,disabled:re,onClick:async e=>{p(),b(e)},checkoutUrl:ue}),h&&v?(0,y.tZ)(z,{$as:o.rU,to:(0,l.vN_)(E,"unlockGroupCart"),children:(0,y.tZ)(d.v,{id:"go.unlock_cart"})}):K&&Ee>0?(0,y.tZ)(z,{$as:o.rU,to:ne,onClick:e=>{if(G&&"cart_animation"===k)return e.preventDefault(),e.stopPropagation(),void p();oe()},disabled:v,children:(0,y.tZ)(d.v,{id:"shared.addItems"})}):null]}):(0,y.BX)(y.HY,{children:[(0,y.tZ)(u.Z,{type:"login",redirectTo:(0,l.Zs0)(E),isGuestMode:_e,children:e=>{let{href:t,onClick:i}=e;return(0,y.tZ)(f,{isGuestMode:_e,disabled:re,onClick:async e=>{b(e),i(e)},authHref:t,checkoutUrl:ue})}}),_e?W(x,ue,re):null]})}},92807:(e,t,i)=>{i.d(t,{Z:()=>C});var r=i(26602),n=i(72920),o=i(45055),l=i(59869),E=i(90997),a=i(41494),d=i(86724),_=i(48469),s=i(18081),u=i(64248),c=i(73086),O=i(68910),I=i(90004),T=i(48238),A=i(46816),N=i(92346),R=i(30330);const D=(0,u.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall}})),S=e=>{const t=(0,N.TH)(),i=(0,A.ZP)(),d={...e.authOnClick?{onClick:t=>{i("eats:start_group_order_button"),e.authOnClick&&e.authOnClick(t)}}:{...e.beforeNavigate?{onClick:()=>{i("eats:start_group_order_button"),e.beforeNavigate&&e.beforeNavigate()}}:null,to:e.store.data?(0,r.Ljk)(t,(0,r.Btk)(e.store.data)):""},...e.href?{href:e.href}:null,...e.href&&e.authOnClick?{$as:"a"}:{$as:E.rU}};return(0,R.BX)(R.HY,{children:[(0,R.tZ)(o.ZP,{$height:24}),(0,R.BX)(l.Bi,{...d,children:[(0,R.tZ)(s.Z,{size:16}),(0,R.tZ)(a.sA,{}),(0,R.tZ)(D,{children:(0,R.tZ)(n.v,{id:"components.checkout.group_order"})})]})]})},C=e=>{var t;const{user:i}=(0,d.Z)(),n=(0,N.TH)(),o=(0,c.I0)(),l=(0,I.Z)(),{deliveryAddress:E,deliveryTime:a,storeUuid:s,diningMode:u,isEditOrder:A}=(0,O.Z)();return A?null:null!==(t=i.data)&&void 0!==t&&t.isLoggedIn||!e.store.data?(0,R.tZ)(S,{store:e.store,...l&&s?{beforeNavigate:()=>{o((0,T.A0)(s,{...a?{storeScheduledTime:a}:{},...E?{storeDeliveryLocation:E}:{},...u?{storeDiningMode:u}:{}}))}}:{}}):(0,R.tZ)(_.Z,{type:"login",redirectTo:(0,r.Ljk)(n,(0,r.Btk)(e.store.data)),children:t=>{let{onClick:i,href:r}=t;return(0,R.tZ)(S,{store:e.store,authOnClick:i,href:r})}})}},18081:(e,t,i)=>{i.d(t,{Z:()=>l});var r=i(77808),n=i(2590),o=i(30330);const l=r.forwardRef((function(e,t){return(0,o.BX)(n.Z,{viewBox:"0 0 24 24",ref:t,...e,children:[(0,o.tZ)("g",{clipPath:"url(#clip0)",children:(0,o.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 12a5.5 5.5 0 100-11 5.5 5.5 0 000 11zm13 5h-3v-3h-3v3h-3v3h3v3h3v-3h3v-3zM1 23h12.1c-1-1.2-1.6-2.8-1.6-4.5 0-1.7.6-3.3 1.6-4.5H7c-3.3 0-6 2.7-6 6v3z"})}),(0,o.tZ)("defs",{children:(0,o.tZ)("clipPath",{id:"clip0",children:(0,o.tZ)("path",{d:"M0 0h24v24H0z"})})})]})}))},46800:(e,t,i)=>{i.d(t,{c:()=>$,Z:()=>Oe});var r=i(18898),n=i(77808),o=i(90997),l=i(37725),E=i(92346),a=i(72920),d=i(64248),_=i(26602),s=i(74978),u=i(41494),c=i(13428),O=i(34720),I=i(76893),T=i(56051),A=i(59869),N=i(13266),R=i(23742),D=i(58885),S=i(13149),C=i(30330);const L=e=>{let{storeItem:t,storeUuid:i,isDisabled:r,isLoading:o,cartQuantity:l,onUpdate:E}=e;const[a,d]=(0,n.useState)(l);(0,n.useEffect)((()=>{d(l)}),[l]);const _=(0,n.useRef)(void 0),s=(0,n.useCallback)((e=>{let t;d((i=>t=D.Tf.from(i).add(e).toFloat())),clearTimeout(_.current),_.current=setTimeout((()=>{E(t)}),750)}),[E]);return(0,C.tZ)(S.Z,{type:"secondary",storeUuid:i,item:t,quantity:a,updateQuantity:s,isDisabled:r||o,isRemovable:!0})};var p=i(17075),h=i(45364),U=i(11547),m=i(46816);const v=(0,d.zo)("div",{marginRight:"8px",pointerEvents:"auto"});function Z(e){let{cartItemActions:t,onRemove:i,onReplace:r,disabled:o}=e;const l=(0,n.useRef)(!1),E=(0,m.ZP)(),a=Array.from(t||[]);return(0,n.useEffect)((()=>{l.current||(a.forEach((e=>{E("eats:cart_item_action_impression",{type:String(e.cartItemActionType||"")})})),l.current=!0)}),[E,a]),(0,C.tZ)(C.HY,{children:a.map((e=>null==e.buttonViewModel?null:(0,C.tZ)(v,{children:(0,C.tZ)(U.Z,{isDisabled:o,viewModel:e.buttonViewModel,onClick:()=>{(e=>{switch(E("eats:cart_item_action_click",{type:String(e||"")}),e){case"REMOVE":return i();case"REPLACE":r()}})(e.cartItemActionType)}})},e.cartItemActionType)))})}var M=i(29886),P=i(73081),g=i(9420),B=i(54008),y=i(68910),f=i(1297),b=i(83158),V=i(78506),H=i(74990),z=i(86051),F=i(73086),W=i(34319),K=i(27531),G=i(99324),k=i(48388);const Y=(0,d.zo)("li",(e=>{let{$theme:t}=e;return{width:"100%",paddingTop:"8px",":first-child":{paddingTop:"4px"},color:t.colors.contentSecondary,display:"flex",flexWrap:"wrap"}})),X=(0,d.zo)("span",(e=>{let{$theme:t}=e;return{...t.typography.LabelSmall,lineHeight:"20px"}})),x=(0,d.zo)("span",(e=>{let{$theme:t}=e;return{display:"flex",...t.typography.ParagraphSmall}})),$=e=>{var t,i;let{customization:n,currencyCode:o,depth:l}=e;const{customizationTitle:E}=n,a=(0,M.Z)(),d=n.nestedOptions||(null===(t=n.options)||void 0===t?void 0:t.map((e=>e.option)))||[],_=n.options&&(null===(i=n.options)||void 0===i?void 0:i.map((e=>e.nestedCustomizations)).filter((e=>e.length)))||[];return(0,C.BX)(C.HY,{children:[(0,C.BX)(Y,{children:[(0,C.BX)(X,{children:[E,":"]}),d.map(((e,t)=>{let{title:i,price:n,quantity:l,uuid:E}=e;const _=(0,T.xG)(a,o,n);return(0,C.BX)(r.Fragment,{children:[(0,C.tZ)(u.Q3,{}),(0,C.BX)(x,{children:[(0,C.tZ)(N.Z,{title:i,price:n,quantity:l,formattedPrice:_}),(0,C.tZ)("div",{children:t<d.length-1?",":""})]})]},"customization-option-".concat(E,"-group-").concat(t))}))]}),_.map(((e,t)=>e.map(((e,i)=>(0,C.tZ)($,{customization:e,currencyCode:o,depth:l+1},"level-".concat(l+1,"-customization-group-").concat(t,"-").concat(i))))))]})},w=(0,d.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",flexDirection:"row",":not(:first-child)":{marginTop:"16px",borderTop:"1px solid ".concat(t.colors.borderOpaque),paddingTop:"12px"}}})),j=(0,d.zo)(o.rU,(e=>{let{disabled:t}=e;return{width:"100%",pointerEvents:t?"none":"auto"}})),Q=(0,d.zo)("li",{width:"100%",paddingTop:"16px"}),q=(0,d.zo)("div",{width:"100%",maxWidth:"100%",display:"flex"}),J=(0,d.zo)("div",{flexGrow:1}),ee=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,padding:0}})),te=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{marginTop:"4px",...t.typography.ParagraphSmall,color:t.colors.contentNegative}})),ie=(0,d.zo)("ul",{flexGrow:1}),re=(0,d.zo)("div",{paddingLeft:"".concat(16,"px")}),ne=(0,d.zo)(c.Z,(e=>{let{$theme:t}=e;return{height:"".concat(48,"px"),width:"".concat(48,"px"),objectFit:"cover",outline:"1px solid ".concat(t.colors.contentPrimary,"08"),outlineOffset:"-1px"}})),oe=(0,d.zo)("div",{height:"64px",display:"flex",alignItems:"center"}),le=(0,d.zo)("div",{display:"flex"}),Ee=(0,d.zo)(A.Bi,{pointerEvents:"auto"}),ae=(0,d.zo)("div",{flexGrow:1,display:"flex",justifyContent:"flex-end",alignItems:"center"}),de=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",alignItems:"center",marginTop:t.sizing.scale100}})),_e=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall,color:t.colors.contentTertiary,marginLeft:t.sizing.scale300}})),se=(0,d.zo)("div",(e=>{let{$theme:t}=e;return{display:"flex",width:t.sizing.scale500,height:t.sizing.scale500}})),ue=(0,d.zo)("div",{display:"flex",alignItems:"center"}),ce=e=>{var t,i,r,o,d,c,I,T,A,N,S,U,m,v,M;let{shoppingCartItem:g,cmpCartItem:f,storeItem:b,itemCustomizations:ce,quantitySelectType:Oe,fulfillmentIssueOptions:Ie}=e;const Te=(0,E.TH)(),Ae=(0,l.k6)(),{uuid:Ne,shoppingCartItemUuid:Re,title:De,specialInstructions:Se,quantity:Ce,customizations:Le,imageURL:pe,storeUuid:he,sectionUuid:Ue,subsectionUuid:me,fulfillmentIssueAction:ve,itemQuantity:Ze,pricedByUnit:Me}=g,{isBundledOrder:Pe,serverCart:ge}=(0,s.Dz)(),{store:Be}=(0,K.Z)(he),ye="cart-item-"+Ne,{data:fe}=function(e){let{storeUuid:t,sectionUuid:i,subsectionUuid:r,menuItemUuid:n}=e;return(0,k.hn)((0,G.A)({itemRequestType:"ITEM",storeUuid:t,sectionUuid:i,subsectionUuid:r,menuItemUuid:n,diningMode:null},{preparedId:"mobile-menu-item",queryObserverOptions:{enabled:!0}}))}({storeUuid:he,sectionUuid:Ue,subsectionUuid:me,menuItemUuid:Ne}),be=null!==(t=null!==(i=g.sellingOption)&&void 0!==i?i:(0,W.qY)(null==b||null===(r=b.purchaseInfo)||void 0===r||null===(o=r.purchaseOptions)||void 0===o?void 0:o[0]))&&void 0!==t?t:(0,W.Wq)(null==fe||null===(d=fe.purchaseInfo)||void 0===d||null===(c=d.purchaseOptions)||void 0===c?void 0:c[0]),Ve=(0,B.CF)(),{isBillSplitOrder:He,isDraftOrderCartLocked:ze,isDraftOrderParticipant:Fe}=(0,y.Z)(),We=(null===(I=ge.data)||void 0===I?void 0:I.currencyCode)||"",{inCartItemXP:Ke,inCartRemoveBtnXP:Ge}=(0,V.Z)(),ke=null===(T=D.Tf.maybeFrom(null==Ze||null===(A=Ze.inSellableUnit)||void 0===A?void 0:A.value))||void 0===T?void 0:T.toE5().toBaseDecimal(),Ye=(0,W.O$)(null!==(N=null==b?void 0:b.purchaseInfo)&&void 0!==N?N:g.pricedByUnit),Xe=(0,P.Z)(),xe=(0,n.useCallback)((e=>Xe(Re,e)),[Re,Xe]),$e=(0,n.useCallback)((()=>xe(0)),[xe]),we=ge.isLoading||Ve.isLoading,je=He&&ze&&Fe,Qe=!(null==f||null===(S=f.singleCartItemWarnings)||void 0===S||!S.find((e=>e.type===O.mP.UNAVAILABLE))),qe=(0,_.F$D)(Te,{storeUuid:he,itemUuid:Ne,storeSlug:(null==Be||null===(U=Be.data)||void 0===U?void 0:U.slug)||"",sectionUuid:g.sectionUuid,subsectionUuid:g.subsectionUuid},"auto-replace-backup-item"),Je=Array.from((null==f?void 0:f.cartItemActions)||[]).length>0,et="ACTION_SHEET"===(null==Ie?void 0:Ie.fulfillmentIssueDisplayType),tt="SUBSTITUTE_ITEM"===(null==ve?void 0:ve.type),it=null==ve?void 0:ve.itemSubstitutes,rt=null==Ie||null===(m=Ie.resolutionActions)||void 0===m?void 0:m.find((e=>{var t;return(null===(t=e.action)||void 0===t?void 0:t.type)===(null==ve?void 0:ve.type)})),nt=(0,F.I0)();return Ke?(0,C.tZ)(j,{to:Ye?"":(0,_.vN_)(Te,"editItem",Re),disabled:we||je||Qe,onClick:()=>{et?(nt((0,z.Sj)(null==ve?void 0:ve.type)),it&&nt((0,z.Or)(it[0]))):nt((0,z.im)())},children:(0,C.BX)(Q,{"data-test":ye,children:[(0,C.BX)(q,{children:[(0,C.BX)(J,{children:[(0,C.tZ)(ee,{children:De}),null==f||null===(v=f.singleCartItemWarnings)||void 0===v?void 0:v.map((e=>(0,C.tZ)(te,{children:e.title},e.type))),(0,C.BX)(ie,{children:[null==ce?void 0:ce.map(((e,t)=>(0,C.tZ)($,{customization:e,currencyCode:We,depth:0},"level-".concat(0,"-customization-group-",t)))),tt&&it||!rt?null:(0,C.BX)(de,{children:[(0,C.tZ)(se,{children:(0,C.tZ)(H.Z,{size:12,color:"contentTertiary"})}),(0,C.tZ)(_e,{children:rt.title})]}),tt&&it?(0,C.BX)(de,{children:[(0,C.tZ)(se,{children:(0,C.tZ)(H.Z,{size:12,color:"contentTertiary"})}),(0,C.tZ)(_e,{children:null===(M=it[0])||void 0===M?void 0:M.title})]}):null,Se?(0,C.BX)(Y,{children:[(0,C.BX)(X,{children:[(0,C.tZ)(a.v,{id:"components.SpecialInstructions.text"}),":"]}),(0,C.tZ)(x,{children:Se})]}):null]})]}),pe?(0,C.tZ)(re,{children:(0,C.tZ)(ne,{src:pe,alt:De})}):null]}),(0,C.BX)(oe,{children:[(0,C.BX)(le,{onClick:e=>{e.stopPropagation(),e.preventDefault()},children:[Qe?null:(0,C.BX)(C.HY,{children:["picker"===Oe?(0,C.tZ)(p.Z,{item:null!=b?b:g,itemUuid:Ne,disabled:we||je,noRemoveOpt:Ge,value:Ce,updateItemQuantity:xe,decimalQuantity:ke,sellingOption:be,itemQuantity:Ze,pricedByUnit:Me,isInCart:!0}):(0,C.tZ)(L,{storeItem:b,storeUuid:he,isLoading:we,isDisabled:je,cartQuantity:Ce,onUpdate:xe}),(0,C.tZ)(u.sA,{})]}),Qe||Ge||Pe?(0,C.tZ)(ue,{children:Je?(0,C.tZ)(Z,{disabled:we||je,cartItemActions:null==f?void 0:f.cartItemActions,onRemove:$e,onReplace:()=>{Ae.push(qe)}}):(0,C.tZ)(Ee,{onClick:$e,disabled:we||je,children:(0,C.tZ)(a.v,{id:"shared.remove"})})}):null]}),(0,C.tZ)(ae,{children:(0,C.tZ)(R.Z,{shoppingCartItemUuid:Re,cartItem:f})})]})]})}):(0,C.BX)(w,{"data-test":ye,children:[(0,C.tZ)(p.Z,{itemUuid:Ne,item:b,updateItemQuantity:xe,disabled:we||je,value:Ce,decimalQuantity:ke,sellingOption:be,itemQuantity:Ze,pricedByUnit:Me,isInCart:!0}),(0,C.tZ)(u.IQ,{}),(0,C.tZ)(h.Z,{itemUuid:Ne,storeUuid:he,isDisabled:we||je||Ye,to:(0,_.vN_)(Te,"editItem",Re),title:De,allCustomizations:Le,changedCustomizations:ce||[],currencyCode:We,shoppingCartItemUuid:Re,specialInstructions:Se,imageUrl:pe,fulfillmentIssueAction:ve,fulfillmentIssueOptions:Ie})]},Re)},Oe=e=>{let{cmpCartItems:t,quantitySelectType:i="picker",fulfillmentIssueOptions:r}=e;const{currentUserCartItems:o,storeUuid:l}=(0,y.Z)(),E=(0,f.Z)(l),a=(0,n.useMemo)((()=>(0,I.Tg)(o)),[o]),d=(0,n.useMemo)((()=>(t||[]).reduce(((e,t)=>(e[(null==t?void 0:t.shoppingCartItemUUID)||""]=t,e)),{})),[t]),_=(0,b.Z)();return(0,g.Z)(_),(0,C.tZ)("ul",{children:o.map((e=>{var t;const{shoppingCartItemUuid:n,uuid:o}=e,l=null!==(t=E[o])&&void 0!==t?t:void 0,_=d[n];return(0,C.tZ)(ce,{shoppingCartItem:e,cmpCartItem:_,storeItem:l,itemCustomizations:a[n],quantitySelectType:i,fulfillmentIssueOptions:r},n)}))})}},61587:(e,t,i)=>{i.d(t,{Z:()=>_e});var r=i(18898),n=i(72920),o=i(64248),l=i(45055),E=i(92807),a=i(46800),d=i(25130),_=i(34506),s=i(13428),u=i(7168),c=i(74978),O=i(27531),I=i(68910),T=i(91964),A=i(90004),N=i(78506),R=i(9661),D=i(90997),S=i(50725),C=i(54008),L=i(19785),p=i(2989),h=i(4793),U=i(99488),m=i(97224),v=i(78072),Z=i(82604),M=i(65598),P=i(11512),g=i(46532),B=i(99159),y=i(30330);const f=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingMedium,marginBottom:t.sizing.scale600,paddingLeft:t.sizing.scale700}})),b=(0,o.zo)("ul",(e=>{let{$theme:t}=e;return{}})),V=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{paddingTop:t.sizing.scale600,paddingRight:t.sizing.scale700}})),H=(0,o.zo)("li",(e=>{let{$theme:t}=e;return{display:"flex",padding:"".concat(t.sizing.scale600," 0")}})),z=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{padding:t.sizing.scale700}})),F=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{}})),W=(0,o.zo)("div",(e=>{let{$theme:t,$isBold:i}=e;return Object.assign({marginBottom:t.sizing.scale100},i?{...t.typography.LabelMedium}:{...t.typography.ParagraphSmall})})),K=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),G=e=>{var t,i,r,n,o;return(0,y.BX)(h.R1,{isOpen:e.isOpen,closeable:!0,onClose:()=>e.onClose(),children:[(0,y.BX)(V,{children:[(0,y.tZ)(f,{children:null===(t=e.bottomSheet)||void 0===t||null===(i=t.title)||void 0===i?void 0:i.text}),(0,y.tZ)(b,{children:null===(r=e.bottomSheet)||void 0===r||null===(n=r.paragraphs)||void 0===n?void 0:n.map((e=>{let{title:t,iconUrl:i,isTitleBold:r,subtitle:n}=e;return(0,y.BX)(H,{children:[i?(0,y.tZ)(z,{children:(0,y.tZ)(s.Z,{src:i})}):null,(0,y.BX)(F,{children:[(0,y.tZ)(W,{$isBold:r,children:t}),(0,y.tZ)(K,{children:n})]})]},t)}))})]}),(0,y.tZ)(U.m,{children:(0,y.tZ)(m.V,{onClick:()=>e.onClose(),children:null===(o=e.bottomSheet)||void 0===o?void 0:o.buttonText})})]})},k=e=>{var t,i,r,n,o,l,E;return(0,y.BX)(v.u_,{isOpen:e.isOpen,children:[(0,y.tZ)(Z.xB,{title:null===(t=e.bottomSheet)||void 0===t||null===(i=t.title)||void 0===i?void 0:i.text,leftButton:(0,y.tZ)(M.hQ,{onClick:()=>e.onClose()})}),(0,y.BX)(P.f,{$removeMarginTop:!0,children:[(0,y.tZ)(g.r,{children:null===(r=e.bottomSheet)||void 0===r||null===(n=r.title)||void 0===n?void 0:n.text}),(0,y.tZ)(b,{children:null===(o=e.bottomSheet)||void 0===o||null===(l=o.paragraphs)||void 0===l?void 0:l.map((e=>{let{title:t,iconUrl:i,isTitleBold:r,subtitle:n}=e;return(0,y.BX)(H,{children:[i?(0,y.tZ)(z,{children:(0,y.tZ)(s.Z,{src:i})}):null,(0,y.BX)(F,{children:[(0,y.tZ)(W,{$isBold:r,children:t}),(0,y.tZ)(K,{children:n})]})]},t)}))})]}),(0,y.tZ)(U.m,{children:(0,y.tZ)(m.V,{onClick:()=>e.onClose(),children:null===(E=e.bottomSheet)||void 0===E?void 0:E.buttonText})})]})},Y=e=>{var t;const{isMobile:i}=(0,B.hU)();var r;return i?(0,y.tZ)(G,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:null===(r=e.actionMetadata)||void 0===r?void 0:r.bottomSheet}):(0,y.tZ)(k,{isOpen:e.isOpen,onClose:e.onClose,bottomSheet:null===(t=e.actionMetadata)||void 0===t?void 0:t.bottomSheet})},X=e=>{var t;let{bannerAction:i}=e;const[n,o]=r.useState(!1);return i.bannerModel?(0,y.BX)(r.Fragment,{children:[(0,y.tZ)(p.Z,{onClick:()=>o(!0),viewModel:i.bannerModel}),(0,y.tZ)(Y,{isOpen:n,actionMetadata:"openBottomSheetMetadata"===(null===(t=i.actionMetadata)||void 0===t?void 0:t.type)?i.actionMetadata.openBottomSheetMetadata:void 0,onClose:()=>o(!1)})]}):null};var x=i(11674);const $=()=>{const{currentUserItemCount:e}=(0,I.Z)();return 1===e?(0,y.tZ)(n.v,{id:"shared.numCartItemsSingular",data:{numCartItems:e}}):(0,y.tZ)(n.v,{id:"shared.numCartItems",data:{numCartItems:e}})},w=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{borderTop:"1px solid ".concat(t.colors.borderOpaque)}})),j=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{margin:"0 !important",minHeight:t.sizing.scale300,background:t.colors.backgroundTertiary}})),Q=(0,o.zo)(D.rU,{margin:"0 !important",display:"flex",flexDirection:"row"}),q=(0,o.zo)(s.Z,(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,height:t.sizing.scale1600,padding:t.sizing.scale600,borderRadius:t.borders.radiusFull}})),J=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"flex-start",gap:t.sizing.scale0}})),ee=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{width:t.sizing.scale1600,display:"flex",justifyContent:"center",alignItems:"center",color:t.colors.contentStateDisabled}})),te=e=>{var t,i;let{quantitySelectType:n="picker",cartItems:o,cartItemsGroup:E}=e;const{draftOrder:d,isBundledOrder:s}=(0,c.Dz)(),{restaurantLink:I,onGoToStore:T}=(0,S.Z)(),{store:A}=(0,O.Z)(null==d?void 0:d.shoppingCart.storeUuid);return(0,y.BX)(y.HY,{children:[E?(0,y.BX)(r.Fragment,{children:[(0,y.BX)(Q,{to:I,onClick:T,children:[(0,y.tZ)(q,{src:E.iconUrl||""}),(0,y.BX)(J,{children:[(0,y.tZ)(L.ZP,{text:E.title}),(0,y.tZ)(L.ZP,{text:E.subtitle})]}),(0,y.tZ)(ee,{children:(0,y.tZ)(u.Z,{size:24})})]}),null===(t=E.actionableBanners)||void 0===t?void 0:t.map(((e,t)=>(0,y.tZ)(X,{bannerAction:e},"saving-banner-".concat(t))))]}):null,(0,y.tZ)(a.Z,{cmpCartItems:o,quantitySelectType:n,fulfillmentIssueOptions:null==A||null===(i=A.data)||void 0===i?void 0:i.fulfillmentIssueOptions}),(0,y.tZ)(_.Z,{store:A,instructionsPadding:8,isRegularOrder:!0}),(0,y.tZ)(l.ZP,{$height:16}),s?(0,y.tZ)(j,{}):(0,y.tZ)(w,{})]})},ie=(0,o.zo)("div",{padding:"12px 0",display:"flex",alignItems:"center"}),re=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,flexGrow:1}})),ne=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphMedium,color:t.colors.contentSecondary,paddingRight:"4px"}})),oe=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium}})),le=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.HeadingXSmall,display:"flex",justifyContent:"space-between"}})),Ee=(0,o.zo)("button",(e=>{let{$theme:t}=e;return{...t.typography.LabelMedium,color:t.colors.negative,justifyContent:"center",display:"flex",margin:"0 auto 16px",padding:"16px 12px",cursor:"pointer"}})),ae=(0,o.zo)("div",{width:"100%"}),de=(0,o.zo)("div",(e=>{let{$theme:t}=e;return{...t.typography.ParagraphSmall}})),_e=e=>{var t,i,r,o;let{disableGroupOrder:a,quantitySelectType:_="picker",onClearCart:s}=e;const u=(0,A.Z)(),{inCartActionsXP:D,inCartItemXP:S}=(0,N.Z)(),{isBundledOrder:L,draftOrder:p}=(0,c.Dz)(),{hasGroupOrder:h}=(0,I.Z)(),U=null==p?void 0:p.storeUuid,m=(0,R.Z)({storeUuid:U}),{store:v}=(0,O.Z)(U),{belowMBSPercent:Z,isTreated:M}=(0,x.q)(null==v?void 0:v.data),P=null===(t=(0,C.ZP)("cartItems").data)||void 0===t||null===(i=t.checkoutPayloads)||void 0===i?void 0:i.cartItems,g=(0,T.Z)("multicart_clear_cart");return(0,y.BX)(y.HY,{children:[L?null:(0,y.BX)(y.HY,{children:[m||a||D?null:(0,y.tZ)(E.Z,{store:v}),S?(0,y.BX)(y.HY,{children:[(0,y.BX)(ie,{children:[(0,y.tZ)(re,{children:(0,y.tZ)($,{})}),(0,y.BX)(ne,{children:[(0,y.tZ)(n.v,{id:"shared.subtotal"}),":"]}),(0,y.tZ)(oe,{children:(0,y.tZ)(d.Z,{})})]}),(0,y.tZ)(w,{})]}):(0,y.tZ)(l.ZP,{$height:20})]}),null!=P&&P.cartItemsGroups?null==P||null===(r=P.cartItemsGroups)||void 0===r?void 0:r.map((e=>{var t;return(0,y.tZ)(c.zW,{draftOrderUUID:e.draftOrderUUID,children:(0,y.tZ)(te,{quantitySelectType:_,cartItems:null!==(t=e.cartItems)&&void 0!==t?t:void 0,cartItemsGroup:e})},e.draftOrderUUID)})):(0,y.tZ)(te,{quantitySelectType:_,cartItems:null!==(o=null==P?void 0:P.cartItems)&&void 0!==o?o:void 0}),S?(0,y.BX)(y.HY,{children:[(0,y.tZ)(l.ZP,{$height:16}),(0,y.BX)(le,{children:[(0,y.BX)(ae,{children:[(0,y.tZ)(n.v,{id:"shared.subtotal"}),M&&0===Z?(0,y.tZ)(de,{children:(0,y.tZ)(n.v,{id:"cart.shared.savings.applied"})}):null]}),(0,y.tZ)(d.Z,{})]}),(0,y.tZ)(l.ZP,{$height:16})]}):null,u&&!h&&!D&&s?(0,y.BX)(y.HY,{children:[(0,y.tZ)(l.ZP,{$height:10}),(0,y.tZ)(Ee,{onClick:()=>{s&&s(),g(U)},children:(0,y.tZ)(n.v,{id:"menu_item.error_clear_cart"})})]}):null]})}},25130:(e,t,i)=>{i.d(t,{Z:()=>_});var r=i(88057),n=i(905),o=i(30051),l=i(36182),E=i(25301),a=i(74978),d=i(30330);const _=()=>{var e;const{serverCart:t}=(0,a.iQ)(),i=(0,r.Z)("subtotal"),_=(0,l.ZP)(void 0,!(null!==(e=t.data)&&void 0!==e&&e.isOwner)),s=(0,E.T)();return _?(0,d.tZ)(n.Z,{source:i,loaded:e=>{var t;return(0,d.tZ)("span",{"aria-label":s("shared.subtotal"),children:null===(t=e.subtotal)||void 0===t?void 0:t.formattedValue})},error:()=>null,loading:()=>(0,d.tZ)(o.sM,{$width:"40px"})}):null}},11674:(e,t,i)=>{i.d(t,{q:()=>T});var r=i(25301),n=i(74978),o=i(2815),l=i(52753),E=i(30879),a=i(88057),d=i(86724),_=i(44522),s=i(29886),u=i(56051),c=i(68910),O=i(18449),I=i(48215);const T=e=>{var t,i,T;const{uuid:A="",cityId:N=0,eatsPassExclusionBadge:R,location:D}=e||{},{hasActiveUberOne:S}=(0,d.Z)(),C=(0,_.Z)((0,a.Z)("subtotal")),L=(0,a.Z)("cartItems"),p=(0,_.Z)(L),h=Number(null==C||null===(t=C.subtotal)||void 0===t||null===(i=t.value)||void 0===i?void 0:i.amountE5)||0,U=(0,s.Z)(),m=!(0,I.Z)(A),v=(0,r.T)(),{serverCart:Z}=(0,n.iQ)(),M=(0,O.ZP)(),{isBillSplitOrder:P,isDraftOrderParticipant:g}=(0,c.Z)(),B=Object.values((null==p?void 0:p.itemCharges)||{}).some((e=>e.discountedAmount&&(null==e?void 0:e.originalAmount)!==(null==e?void 0:e.discountedAmount))),y=Boolean(m&&(!M||"UNAVAILABLE_ITEMS"!==(null==M?void 0:M.type))&&h>0&&S&&R&&!B&&(!g||P)),f=function(e,t){const i=(0,E.Z)("getUberOneMbsV1"),r=(0,l.H)("getUberOneMbsV1",e);return(0,o.useQuery)({queryKey:r,queryFn:e=>{let{queryKey:t}=e;return i.request("getUberOneMbsV1",t[1])},...null==t?void 0:t.queryObserverOptions})}({storeCityId:N,storeCountryCode:(null==D?void 0:D.country.toLowerCase())||"us"},{queryObserverOptions:{enabled:Boolean(y&&N)}}),b=null==f?void 0:f.data,V=b&&h<b?(b-h)/b*100:0,H=b?(b-h)/1e3:0;return{isTreated:Boolean(y&&b),belowMBSPercent:V,belowMBSMessage:b&&V>0?v("shared.cart.uberone.mbs.pending",{amount:(0,u.xG)(U,(null===(T=Z.data)||void 0===T?void 0:T.currencyCode)||"USD",H)}):""}}},89817:(e,t,i)=>{i.d(t,{X:()=>l,t:()=>o});var r=i(24436),n=i(26602);const o=(e,t)=>{const i={entryPoint:t.entryPoint};return t.storeUuid&&(i.encodedStoreUuid=(0,r.$I)(t.storeUuid)),(0,n.vN_)(e,"deliveryTime",encodeURIComponent(JSON.stringify(i)))},l=(e,t,i)=>{const o={entryPoint:t.entryPoint};return t.storeUuid&&(o.encodedStoreUuid=(0,r.$I)(t.storeUuid)),t.openedFromMenuDialogue&&(o.openedFromMenuDialogue=!0),(0,n.vN_)(e,"storeDeliveryTime",encodeURIComponent(JSON.stringify(o)),i)}},7961:(e,t,i)=>{i.d(t,{Z:()=>T,w:()=>I});var r=i(77808),n=i(37725),o=i(2815),l=i(43287),E=i(26602),a=i(73086),d=i(17090),_=i(92346),s=i(68910),u=i(54008);const c="uev2.premise-delivery-info",O="premise_delivery_info";function I(e){if(!e)return null;const t=e.premiseDeliveryInfo;return t?[t.map((e=>{let{label:t,venueSectionName:i}=e;return"".concat(t," ").concat(i)})).join(", "),e.notes].filter(Boolean).join(" - "):null}function T(){var e,t,i,T,A;const N=(0,d._)(),R=(0,_.TH)(),D=(0,n.k6)(),S=(0,a.I0)(),C=(0,u.CF)(),{diningMode:L}=(0,s.Z)(),p=(0,o.useQueryClient)(),h="ON_PREMISE_DELIVERY"===L?"HOTEL":"STADIUM",U=(null==C||null===(e=C.data)||void 0===e||null===(t=e.checkoutPayloads)||void 0===t||null===(i=t.venueSectionPicker)||void 0===i?void 0:i.venueSectionPickerViewModel)||null,m=null!==(T=null===(A=(0,o.useQuery)(O,(()=>p.getQueryData(O)||{}),{staleTime:1/0}))||void 0===A?void 0:A.data)&&void 0!==T?T:null,v=(0,r.useCallback)((e=>{N.set(c,e,86400),p.setQueryData(O,e)}),[N,p]),Z=(0,r.useCallback)((()=>{N.remove(c),p.removeQueries({queryKey:O,exact:!0})}),[N,p]),M=(0,r.useCallback)((e=>{v(e),S((0,l.oo)({tableNumber:I(e)||"",action:"complete"})),D.push((0,E.Zs0)(R))}),[v,S,D,R]),P="ON_PREMISE_DELIVERY"===L||Boolean(U);return(0,r.useEffect)((()=>{const e=N.get(c);Boolean(e)&&!m&&p.setQueryData(O,e)}),[N,m,p]),{setPremiseDeliveryInfo:v,removePremiseDeliveryInfo:Z,checkoutWithPremiseDeliveryInfo:M,venueSectionPickerViewModel:U,isOnPremiseDeliveryOrder:P,premiseDeliveryInfo:m,premiseDeliveryType:h,isLoading:!(null!=C&&C.hasLoaded)}}},48445:(e,t,i)=>{i.d(t,{f:()=>n});var r=i(54008);const n=()=>{var e,t;const i=(0,r.ZP)(),{basketSize:n,cartItems:o}=(null===(e=i.data)||void 0===e?void 0:e.checkoutPayloads)||{},l=Boolean(null==n?void 0:n.showAddItemButton),E=null==o||null===(t=o.cartItemsWarnings)||void 0===t?void 0:t[0];return E?{disableCheckout:l||!n||i.isFetching,isCartUnderMBS:l,cartWarning:E}:{disableCheckout:!1,isCartUnderMBS:!1,cartWarning:void 0}}},88057:(e,t,i)=>{i.d(t,{Z:()=>a});var r=i(81922),n=i(77808),o=i(54008),l=i(78506),E=i(74978);function a(e){const t=(0,r.v)((e=>{let{checkoutPresentation:t}=e;return t})),{draftOrderMaybe:i}=(0,E.Dz)(),a=(0,n.useRef)(null),d=(0,n.useRef)(null);var _;a.current!==t&&(a.current=t,d.current={isLoading:t.isLoading||i.isLoading,hasLoaded:t.hasLoaded&&i.hasLoaded,error:t.error,data:null===(_=t.data)||void 0===_?void 0:_.checkoutPayloads[e]});const{inCheckoutPresentationQueryXP:s}=(0,l.Z)(),{[e]:u}=(0,o.mk)(e);return s?u:d.current}}}]);